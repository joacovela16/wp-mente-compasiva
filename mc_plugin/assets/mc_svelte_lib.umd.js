var il=Object.defineProperty;var St=Object.getOwnPropertySymbols;var sl=Object.prototype.hasOwnProperty,ol=Object.prototype.propertyIsEnumerable;var Ot=(j,D,O)=>D in j?il(j,D,{enumerable:!0,configurable:!0,writable:!0,value:O}):j[D]=O,ue=(j,D)=>{for(var O in D||(D={}))sl.call(D,O)&&Ot(j,O,D[O]);if(St)for(var O of St(D))ol.call(D,O)&&Ot(j,O,D[O]);return j};(function(j,D){typeof exports=="object"&&typeof module!="undefined"?D(exports):typeof define=="function"&&define.amd?define(["exports"],D):(j=typeof globalThis!="undefined"?globalThis:j||self,D(j.MC_SVELTE_LIB={}))})(this,function(j){"use strict";var D="";function O(){}function qe(e){return e()}function He(){return Object.create(null)}function x(e){e.forEach(qe)}function Tt(e){return typeof e=="function"}function ve(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function jt(e){return Object.keys(e).length===0}function i(e,t){e.appendChild(t)}function S(e,t,l){e.insertBefore(t,l||null)}function A(e){e.parentNode.removeChild(e)}function V(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function h(e){return document.createElement(e)}function F(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function G(e){return document.createTextNode(e)}function y(){return G(" ")}function I(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function u(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function be(e,t,l){const n=new Set;for(let s=0;s<e.length;s+=1)e[s].checked&&n.add(e[s].__value);return l||n.delete(t),Array.from(n)}function Dt(e){return Array.from(e.childNodes)}function ke(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function fe(e,t,l){e.classList[l?"add":"remove"](t)}let we;function ie(e){we=e}const se=[],ye=[],pe=[],Le=[],Nt=Promise.resolve();let Ce=!1;function qt(){Ce||(Ce=!0,Nt.then(Ue))}function $e(e){pe.push(e)}const Me=new Set;let de=0;function Ue(){const e=we;do{for(;de<se.length;){const t=se[de];de++,ie(t),Ht(t.$$)}for(ie(null),se.length=0,de=0;ye.length;)ye.pop()();for(let t=0;t<pe.length;t+=1){const l=pe[t];Me.has(l)||(Me.add(l),l())}pe.length=0}while(se.length);for(;Le.length;)Le.pop()();Ce=!1,Me.clear(),ie(e)}function Ht(e){if(e.fragment!==null){e.update(),x(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach($e)}}const Lt=new Set;function ze(e,t){e&&e.i&&(Lt.delete(e),e.i(t))}function Be(e,t){e.d(1),t.delete(e.key)}function Re(e,t,l,n,s,o,r,g,v,m,c,p){let d=e.length,a=o.length,f=d;const _={};for(;f--;)_[e[f].key]=f;const M=[],w=new Map,$=new Map;for(f=a;f--;){const b=p(s,o,f),P=l(b);let N=r.get(P);N?n&&N.p(b,t):(N=m(P,b),N.c()),w.set(P,M[f]=N),P in _&&$.set(P,Math.abs(f-_[P]))}const T=new Set,E=new Set;function q(b){ze(b,1),b.m(g,c),r.set(b.key,b),c=b.first,a--}for(;d&&a;){const b=M[a-1],P=e[d-1],N=b.key,W=P.key;b===P?(c=b.first,d--,a--):w.has(W)?!r.has(N)||T.has(N)?q(b):E.has(W)?d--:$.get(N)>$.get(W)?(E.add(N),q(b)):(T.add(W),d--):(v(P,r),d--)}for(;d--;){const b=e[d];w.has(b.key)||v(b,r)}for(;a;)q(M[a-1]);return M}function Ut(e,t,l,n){const{fragment:s,on_mount:o,on_destroy:r,after_update:g}=e.$$;s&&s.m(t,l),n||$e(()=>{const v=o.map(qe).filter(Tt);r?r.push(...v):x(v),e.$$.on_mount=[]}),g.forEach($e)}function zt(e,t){const l=e.$$;l.fragment!==null&&(x(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Bt(e,t){e.$$.dirty[0]===-1&&(se.push(e),qt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ee(e,t,l,n,s,o,r,g=[-1]){const v=we;ie(e);const m=e.$$={fragment:null,ctx:null,props:o,update:O,not_equal:s,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(v?v.$$.context:[])),callbacks:He(),dirty:g,skip_bound:!1,root:t.target||v.$$.root};r&&r(m.root);let c=!1;if(m.ctx=l?l(e,t.props||{},(p,d,...a)=>{const f=a.length?a[0]:d;return m.ctx&&s(m.ctx[p],m.ctx[p]=f)&&(!m.skip_bound&&m.bound[p]&&m.bound[p](f),c&&Bt(e,p)),d}):[],m.update(),c=!0,x(m.before_update),m.fragment=n?n(m.ctx):!1,t.target){if(t.hydrate){const p=Dt(t.target);m.fragment&&m.fragment.l(p),p.forEach(A)}else m.fragment&&m.fragment.c();t.intro&&ze(e.$$.fragment),Ut(e,t.target,t.anchor,t.customElement),Ue()}ie(v)}class Pe{$destroy(){zt(this,1),this.$destroy=O}$on(t,l){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!jt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ae(e){return t=>e[t]||t}function Ie(e,t){return Array.isArray(e)?e.reduce((l,n)=>(l[t(n)]=n,l),{}):e}function Ge(e,t,l,n){if(Array.isArray(t)){const s=Ie(t,l);e.forEach(o=>{const r=l(o);s[r]||t.push(n(o))})}else e.forEach(s=>{const o=l(s);t[o]||(t[o]=n(s))})}function Ke(e,t,l){const n=e.slice();return n[11]=t[l],n[12]=t,n[13]=l,n}function Ve(e,t,l){const n=e.slice();return n[14]=t[l],n}function We(e,t,l){const n=e.slice();return n[14]=t[l],n}function Fe(e,t,l){const n=e.slice();return n[11]=t[l],n[13]=l,n}function Je(e,t){let l,n=t[11].name+"",s,o,r,g,v;function m(){return t[6](t[13])}return{key:e,first:null,c(){l=h("div"),s=G(n),o=y(),u(l,"class",r="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(t[2].name===t[11].name&&"bg-blue-500 text-white")),this.first=l},m(c,p){S(c,l,p),i(l,s),i(l,o),g||(v=I(l,"click",m),g=!0)},p(c,p){t=c,p&4&&r!==(r="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(t[2].name===t[11].name&&"bg-blue-500 text-white"))&&u(l,"class",r)},d(c){c&&A(l),g=!1,v()}}}function Qe(e){let t,l,n,s,o,r,g=e[14]+"",v,m,c,p;e[8][1][e[13]]=[];function d(){e[7].call(n,e[11],e[13])}return{c(){t=h("div"),l=h("label"),n=h("input"),o=y(),r=h("span"),v=G(g),m=y(),u(n,"type","checkbox"),n.__value=e[14],n.value=n.__value,u(n,"name",s=""+(e[0].names.permission+"["+e[11].name+"][post_types][]")),e[8][1][e[13]].push(n)},m(a,f){S(a,t,f),i(t,l),i(l,n),n.checked=~e[1][e[11].name].post_types.indexOf(n.__value),i(l,o),i(l,r),i(r,v),i(t,m),c||(p=I(n,"change",d),c=!0)},p(a,f){e=a,f&1&&s!==(s=""+(e[0].names.permission+"["+e[11].name+"][post_types][]"))&&u(n,"name",s),f&10&&(n.checked=~e[1][e[11].name].post_types.indexOf(n.__value))},d(a){a&&A(t),e[8][1][e[13]].splice(e[8][1][e[13]].indexOf(n),1),c=!1,p()}}}function Xe(e){let t,l,n,s,o,r,g=e[14]+"",v,m,c,p;e[8][0][e[13]]=[];function d(){e[9].call(n,e[11],e[13])}return{c(){t=h("div"),l=h("label"),n=h("input"),o=y(),r=h("span"),v=G(g),m=y(),u(n,"type","checkbox"),n.__value=e[14],n.value=n.__value,u(n,"name",s=""+(e[0].names.permission+"["+e[11].name+"][capabilities][]")),e[8][0][e[13]].push(n)},m(a,f){S(a,t,f),i(t,l),i(l,n),n.checked=~e[1][e[11].name].capabilities.indexOf(n.__value),i(l,o),i(l,r),i(r,v),i(t,m),c||(p=I(n,"change",d),c=!0)},p(a,f){e=a,f&1&&s!==(s=""+(e[0].names.permission+"["+e[11].name+"][capabilities][]"))&&u(n,"name",s),f&10&&(n.checked=~e[1][e[11].name].capabilities.indexOf(n.__value))},d(a){a&&A(t),e[8][0][e[13]].splice(e[8][0][e[13]].indexOf(n),1),c=!1,p()}}}function Ye(e,t){let l,n,s,o,r,g,v,m,c,p,d,a,f=t[11].post_types,_=[];for(let $=0;$<f.length;$+=1)_[$]=Qe(We(t,f,$));let M=t[11].capabilities||[],w=[];for(let $=0;$<M.length;$+=1)w[$]=Xe(Ve(t,M,$));return{key:e,first:null,c(){l=h("input"),s=y(),o=h("div"),r=h("div"),g=h("div"),g.textContent=`${t[4]("Post types")}`,v=y();for(let $=0;$<_.length;$+=1)_[$].c();m=y(),c=h("div"),p=h("div"),p.textContent=`${t[4]("Capabilities")}`,d=y();for(let $=0;$<w.length;$+=1)w[$].c();a=y(),u(l,"type","hidden"),l.value=t[11].name,u(l,"name",n=""+(t[0].names.permission+"["+t[11].name+"][name]")),u(r,"class","flex-1"),u(c,"class","flex-1"),u(o,"class","p-2 flex flex-row"),fe(o,"hidden",t[11].name!==t[2].name),this.first=l},m($,T){S($,l,T),S($,s,T),S($,o,T),i(o,r),i(r,g),i(r,v);for(let E=0;E<_.length;E+=1)_[E].m(r,null);i(o,m),i(o,c),i(c,p),i(c,d);for(let E=0;E<w.length;E+=1)w[E].m(c,null);i(o,a)},p($,T){if(t=$,T&1&&n!==(n=""+(t[0].names.permission+"["+t[11].name+"][name]"))&&u(l,"name",n),T&11){f=t[11].post_types;let E;for(E=0;E<f.length;E+=1){const q=We(t,f,E);_[E]?_[E].p(q,T):(_[E]=Qe(q),_[E].c(),_[E].m(r,null))}for(;E<_.length;E+=1)_[E].d(1);_.length=f.length}if(T&11){M=t[11].capabilities||[];let E;for(E=0;E<M.length;E+=1){const q=Ve(t,M,E);w[E]?w[E].p(q,T):(w[E]=Xe(q),w[E].c(),w[E].m(c,null))}for(;E<w.length;E+=1)w[E].d(1);w.length=M.length}T&12&&fe(o,"hidden",t[11].name!==t[2].name)},d($){$&&A(l),$&&A(s),$&&A(o),V(_,$),V(w,$)}}}function Rt(e){let t,l,n=[],s=new Map,o,r=[],g=new Map,v=e[3];const m=d=>d[11].name;for(let d=0;d<v.length;d+=1){let a=Fe(e,v,d),f=m(a);s.set(f,n[d]=Je(f,a))}let c=e[3];const p=d=>d[11].name;for(let d=0;d<c.length;d+=1){let a=Ke(e,c,d),f=p(a);g.set(f,r[d]=Ye(f,a))}return{c(){t=h("div"),l=h("div");for(let d=0;d<n.length;d+=1)n[d].c();o=y();for(let d=0;d<r.length;d+=1)r[d].c();u(l,"class","flex flex-row space-x-2"),u(t,"class","bg-white p-2 rounded")},m(d,a){S(d,t,a),i(t,l);for(let f=0;f<n.length;f+=1)n[f].m(l,null);i(t,o);for(let f=0;f<r.length;f+=1)r[f].m(t,null)},p(d,[a]){a&12&&(v=d[3],n=Re(n,a,m,1,d,v,s,l,Be,Je,null,Fe)),a&31&&(c=d[3],r=Re(r,a,p,1,d,c,g,t,Be,Ye,null,Ke))},i:O,o:O,d(d){d&&A(t);for(let a=0;a<n.length;a+=1)n[a].d();for(let a=0;a<r.length;a+=1)r[a].d()}}}function It(e,t,l){const n={names:{permission:"mc_metabox_permission"},selections:{},i18n:{}};let{config:s={permissions:[],selections:{},i18n:{}}}=t;console.log(s);const o=ue(ue({},n),s||{});o.selections||(o.selections={}),Ge(o.permissions,o.selections||{},f=>f.name,f=>({name:f.name,post_types:[],capabilities:[]})),Object.keys(o.selections||{}).forEach(f=>{const _=o.selections[f];_.post_types=_.post_types||[],_.capabilities=_.capabilities||[]});const r=o.permissions,g=o.selections,v=Ae(o.i18n||{});let m=r[0];const c=[[],[]],p=f=>l(2,m=r[f]);function d(f,_){g[f.name].post_types=be(c[1][_],this.__value,this.checked),l(1,g)}function a(f,_){g[f.name].capabilities=be(c[0][_],this.__value,this.checked),l(1,g)}return e.$$set=f=>{"config"in f&&l(5,s=f.config)},[o,g,m,r,v,s,p,d,c,a]}class Gt extends Pe{constructor(t){super();Ee(this,t,It,Rt,ve,{config:5})}}function Ze(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function xe(e,t,l){const n=e.slice();return n[23]=t[l],n}function et(e,t,l){const n=e.slice();return n[23]=t[l],n}function tt(e,t,l){const n=e.slice();return n[28]=t[l],n[30]=l,n}function lt(e,t,l){const n=e.slice();return n[23]=t[l],n}function nt(e){let t,l,n,s,o,r=e[23]+"",g,v;return{c(){t=h("label"),l=h("input"),s=y(),o=h("span"),g=G(r),v=y(),u(l,"type","checkbox"),l.value=e[23],u(l,"name","permissions["+e[22]+"][post_types][]"),l.checked=n=e[20].post_types.includes(e[23]),u(t,"class","flex items-center")},m(m,c){S(m,t,c),i(t,l),i(t,s),i(t,o),i(o,g),i(t,v)},p(m,c){c[0]&1&&n!==(n=m[20].post_types.includes(m[23]))&&(l.checked=n)},d(m){m&&A(t)}}}function it(e){let t,l,n,s,o,r,g=e[28]+"",v,m,c,p,d,a;function f(){return e[13](e[20],e[30],e[21],e[22])}return{c(){t=h("div"),l=h("input"),s=y(),o=h("div"),r=h("span"),v=G(g),m=y(),c=h("span"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',p=y(),u(l,"type","hidden"),l.value=n=e[28],u(l,"name","permissions["+e[22]+"][capabilities][]"),u(c,"class","ml-2 font-bold"),u(o,"class","flex shadow items-center rounded mr-1 px-1"),u(t,"class","w-auto")},m(_,M){S(_,t,M),i(t,l),i(t,s),i(t,o),i(o,r),i(r,v),i(o,m),i(o,c),i(t,p),d||(a=I(c,"click",f),d=!0)},p(_,M){e=_,M[0]&1&&n!==(n=e[28])&&(l.value=n),M[0]&1&&g!==(g=e[28]+"")&&ke(v,g)},d(_){_&&A(t),d=!1,a()}}}function st(e){let t,l,n,s,o,r,g=e[23]+"",v,m;return{c(){t=h("label"),l=h("input"),o=y(),r=h("span"),v=G(g),m=y(),u(l,"type","checkbox"),l.value=n=e[23],u(l,"name","defaults[permissions]["+e[22]+"][post_types][]"),l.checked=s=e[0].defaults.permissions[e[22]].post_types.includes(e[23]),u(t,"class","flex items-center")},m(c,p){S(c,t,p),i(t,l),i(t,o),i(t,r),i(r,v),i(t,m)},p(c,p){p[0]&1&&n!==(n=c[23])&&(l.value=n),p[0]&1&&s!==(s=c[0].defaults.permissions[c[22]].post_types.includes(c[23]))&&(l.checked=s),p[0]&1&&g!==(g=c[23]+"")&&ke(v,g)},d(c){c&&A(t)}}}function ot(e){let t,l,n,s,o,r,g=e[23]+"",v,m;return{c(){t=h("div"),l=h("input"),o=y(),r=h("span"),v=G(g),m=y(),u(l,"type","checkbox"),l.value=n=e[23],u(l,"name","defaults[permissions]["+e[22]+"][capabilities][]"),l.checked=s=e[0].defaults.permissions[e[22]].capabilities.includes(e[23]),u(t,"class","flex items-center")},m(c,p){S(c,t,p),i(t,l),i(t,o),i(t,r),i(r,v),i(t,m)},p(c,p){p[0]&1&&n!==(n=c[23])&&(l.value=n),p[0]&1&&s!==(s=c[0].defaults.permissions[c[22]].capabilities.includes(c[23]))&&(l.checked=s),p[0]&1&&g!==(g=c[23]+"")&&ke(v,g)},d(c){c&&A(t)}}}function Kt(e){let t,l,n;function s(){return e[14](e[22])}return{c(){t=h("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="cursor-pointer" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 15l-6 -6l-6 6h12"></path></svg>',u(t,"title","Move up")},m(o,r){S(o,t,r),l||(n=I(t,"click",s),l=!0)},p(o,r){e=o},d(o){o&&A(t),l=!1,n()}}}function at(e){let t,l,n;function s(){return e[15](e[22])}return{c(){t=h("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="cursor-pointer" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 15l-6 -6l-6 6h12" transform="rotate(180 12 12)"></path></svg>',u(t,"title","Move down")},m(o,r){S(o,t,r),l||(n=I(t,"click",s),l=!0)},p(o,r){e=o},d(o){o&&A(t),l=!1,n()}}}function rt(e){let t,l,n,s,o,r,g,v=e[5]("Name")+"",m,c,p,d,a,f,_,M,w,$,T,E,q,b,P,N,W,J,Oe,mt,_e,gt,oe,vt,Q,he,bt,ae,Te,kt,me,wt,re,je,yt,ge,Ct,X,Y,$t,Mt,De,Et,ce,Pt,Ne,At,ee=e[4],H=[];for(let C=0;C<ee.length;C+=1)H[C]=nt(lt(e,ee,C));function ll(...C){return e[12](e[22],...C)}let te=e[20].capabilities||[],L=[];for(let C=0;C<te.length;C+=1)L[C]=it(tt(e,te,C));let le=e[20].post_types,U=[];for(let C=0;C<le.length;C+=1)U[C]=st(et(e,le,C));let ne=e[20].capabilities||[],z=[];for(let C=0;C<ne.length;C+=1)z[C]=ot(xe(e,ne,C));let Z=e[22]>0&&Kt(e),B=e[22]<e[0].permissions.length-1&&at(e);function nl(...C){return e[16](e[22],...C)}return{c(){t=h("div"),l=h("div"),n=h("div"),s=h("p"),s.textContent=`${e[5]("Configuration")}`,o=y(),r=h("div"),g=h("label"),m=G(v),c=y(),p=h("input"),f=y(),_=h("label"),M=h("input"),T=y(),E=h("span"),E.textContent=`${e[5]("Signed required")}`,q=y(),b=h("div"),P=h("span"),P.textContent=`${e[5]("Post type")}`,N=y();for(let C=0;C<H.length;C+=1)H[C].c();W=y(),J=h("div"),Oe=h("span"),Oe.textContent=`${e[5]("Capabilities")}`,mt=y(),_e=h("input"),gt=y(),oe=h("div");for(let C=0;C<L.length;C+=1)L[C].c();vt=y(),Q=h("div"),he=h("p"),he.textContent=`${e[5]("Default user registry behavior")}`,bt=y(),ae=h("div"),Te=h("p"),Te.textContent=`${e[5]("Default posts")}`,kt=y(),me=h("div");for(let C=0;C<U.length;C+=1)U[C].c();wt=y(),re=h("div"),je=h("p"),je.textContent=`${e[5]("Default capabilities")}`,yt=y(),ge=h("div");for(let C=0;C<z.length;C+=1)z[C].c();Ct=y(),X=h("div"),Y=h("div"),Z&&Z.c(),$t=y(),B&&B.c(),Mt=y(),De=h("div"),Et=y(),ce=h("div"),ce.textContent=`${e[5]("Delete")}`,Pt=y(),u(s,"class","font-bold"),u(p,"type","text"),u(p,"name",d="permissions["+e[22]+"][name]"),p.value=a=e[20].name,u(p,"class","w-auto"),u(g,"class","flex flex-col"),u(M,"type","checkbox"),u(M,"name",w="permissions["+e[22]+"][logged_required]'"),M.checked=$=e[20].logged_required==="on",u(_e,"type","text"),u(oe,"class","flex flex-wrap"),u(J,"class","flex flex-col space-y-1 flex-1"),u(r,"class","flex flex-col space-y-1"),u(n,"class","flex-1"),u(he,"class","font-bold"),u(Q,"class","flex-1"),u(l,"class","flex space-x-2"),u(Y,"class","flex flex-col "),u(De,"class","flex-1"),u(ce,"class","p-2 bg-red-500 rounded text-white "),u(X,"class","flex items-center "),u(t,"class","rounded bg-white p-2")},m(C,R){S(C,t,R),i(t,l),i(l,n),i(n,s),i(n,o),i(n,r),i(r,g),i(g,m),i(g,c),i(g,p),i(r,f),i(r,_),i(_,M),i(_,T),i(_,E),i(r,q),i(r,b),i(b,P),i(b,N);for(let k=0;k<H.length;k+=1)H[k].m(b,null);i(r,W),i(r,J),i(J,Oe),i(J,mt),i(J,_e),i(J,gt),i(J,oe);for(let k=0;k<L.length;k+=1)L[k].m(oe,null);i(l,vt),i(l,Q),i(Q,he),i(Q,bt),i(Q,ae),i(ae,Te),i(ae,kt),i(ae,me);for(let k=0;k<U.length;k+=1)U[k].m(me,null);i(Q,wt),i(Q,re),i(re,je),i(re,yt),i(re,ge);for(let k=0;k<z.length;k+=1)z[k].m(ge,null);i(t,Ct),i(t,X),i(X,Y),Z&&Z.m(Y,null),i(Y,$t),B&&B.m(Y,null),i(X,Mt),i(X,De),i(X,Et),i(X,ce),i(t,Pt),Ne||(At=[I(_e,"keypress",ll),I(ce,"click",nl)],Ne=!0)},p(C,R){if(e=C,R[0]&1&&a!==(a=e[20].name)&&p.value!==a&&(p.value=a),R[0]&1&&$!==($=e[20].logged_required==="on")&&(M.checked=$),R[0]&17){ee=e[4];let k;for(k=0;k<ee.length;k+=1){const K=lt(e,ee,k);H[k]?H[k].p(K,R):(H[k]=nt(K),H[k].c(),H[k].m(b,null))}for(;k<H.length;k+=1)H[k].d(1);H.length=ee.length}if(R[0]&1){te=e[20].capabilities||[];let k;for(k=0;k<te.length;k+=1){const K=tt(e,te,k);L[k]?L[k].p(K,R):(L[k]=it(K),L[k].c(),L[k].m(oe,null))}for(;k<L.length;k+=1)L[k].d(1);L.length=te.length}if(R[0]&1){le=e[20].post_types;let k;for(k=0;k<le.length;k+=1){const K=et(e,le,k);U[k]?U[k].p(K,R):(U[k]=st(K),U[k].c(),U[k].m(me,null))}for(;k<U.length;k+=1)U[k].d(1);U.length=le.length}if(R[0]&1){ne=e[20].capabilities||[];let k;for(k=0;k<ne.length;k+=1){const K=xe(e,ne,k);z[k]?z[k].p(K,R):(z[k]=ot(K),z[k].c(),z[k].m(ge,null))}for(;k<z.length;k+=1)z[k].d(1);z.length=ne.length}e[22]>0&&Z.p(e,R),e[22]<e[0].permissions.length-1?B?B.p(e,R):(B=at(e),B.c(),B.m(Y,null)):B&&(B.d(1),B=null)},d(C){C&&A(t),V(H,C),V(L,C),V(U,C),V(z,C),Z&&Z.d(),B&&B.d(),Ne=!1,x(At)}}}function Vt(e){let t,l,n,s,o,r,g,v,m,c,p,d,a=e[0].permissions,f=[];for(let _=0;_<a.length;_+=1)f[_]=rt(Ze(e,a,_));return{c(){t=h("div"),l=h("div"),n=h("button"),n.textContent=`${e[5]("Save settings")}`,s=y(),o=h("button"),o.textContent=`${e[5]("Add new")}`,r=y(),g=h("details"),v=h("summary"),v.textContent=`${e[5]("Permissions")}`,m=y(),c=h("form");for(let _=0;_<f.length;_+=1)f[_].c();u(n,"class","bg-blue-500 text-white rounded p-1"),u(o,"class","border-1 border-blue-500 rounded p-1 bg-white"),u(l,"class","flex flex-row space-x-2 mt-2"),u(c,"action",e[2]),u(c,"method","post"),u(c,"class","space-y-2"),g.open=!0,u(t,"class","space-y-2")},m(_,M){S(_,t,M),i(t,l),i(l,n),i(l,s),i(l,o),i(t,r),i(t,g),i(g,v),i(g,m),i(g,c);for(let w=0;w<f.length;w+=1)f[w].m(c,null);e[17](c),p||(d=[I(n,"click",e[10]),I(o,"click",e[11])],p=!0)},p(_,M){if(M[0]&1009){a=_[0].permissions;let w;for(w=0;w<a.length;w+=1){const $=Ze(_,a,w);f[w]?f[w].p($,M):(f[w]=rt($),f[w].c(),f[w].m(c,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=a.length}},i:O,o:O,d(_){_&&A(t),V(f,_),e[17](null),p=!1,x(d)}}}function Wt(e,t,l){let{config:n={postUrl:"",defaultPermission:{name:"New permission",logged_required:!0,post_types:[],capabilities:[]},post_types:["post","page","attachment"],permissions:[{name:"ShowProDir",logged_required:!1,post_types:["attachment"],capabilities:["CAN_READ","CAN_WRITE"]}],defaults:{permissions:[],capabilities:[]},i18n:{}}}=t;n.defaults=n.defaults||{},n.defaults.permissions=n.defaults.permissions||[...n.permissions];const s=n.defaults.permissions;for(let b=0;b<s.length;b++)s[b]=s[b]||n.permissions[b],s[b].post_types=s[b].post_types||[],s[b].capabilities=s[b].capabilities||[];const o=n.postUrl,r=n.defaultPermission,g=n.post_types;n.permissions;const v=Ae(n.i18n);let m;function c(b,P){if(b.key==="Enter"){if(b.preventDefault(),b.target.value==="")return;l(0,n.permissions[P].capabilities=n.permissions[P].capabilities||[],n),l(0,n.permissions[P].capabilities=[...n.permissions[P].capabilities,b.target.value],n),b.target.value=""}}function p(b,P){P.preventDefault(),n.permissions.splice(b,1),l(0,n)}function d(b){const P=n.permissions[b-1];l(0,n.permissions[b-1]=n.permissions[b],n),l(0,n.permissions[b]=P,n)}function a(b){const P=n.permissions[b+1];l(0,n.permissions[b+1]=n.permissions[b],n),l(0,n.permissions[b]=P,n)}const f=()=>m.submit(),_=()=>l(0,n.permissions=[r,...n.permissions],n),M=(b,P)=>c(P,b),w=(b,P,N,W)=>{b.capabilities.splice(P,1),l(0,N[W].capabilities=b.capabilities,n)},$=b=>d(b),T=b=>a(b),E=(b,P)=>p(b,P);function q(b){ye[b?"unshift":"push"](()=>{m=b,l(1,m)})}return e.$$set=b=>{"config"in b&&l(0,n=b.config)},[n,m,o,r,g,v,c,p,d,a,f,_,M,w,$,T,E,q]}class Ft extends Pe{constructor(t){super();Ee(this,t,Wt,Vt,ve,{config:0},null,[-1,-1])}}function ct(e,t,l){const n=e.slice();return n[9]=t[l],n[10]=t,n[11]=l,n}function ut(e,t,l){const n=e.slice();return n[12]=t[l],n}function ft(e,t,l){const n=e.slice();return n[9]=t[l],n[11]=l,n}function pt(e){let t,l,n,s,o,r,g=e[2].permissions,v=[];for(let p=0;p<g.length;p+=1)v[p]=dt(ft(e,g,p));let m=e[2].permissions,c=[];for(let p=0;p<m.length;p+=1)c[p]=ht(ct(e,m,p));return{c(){t=h("div"),l=h("p"),l.textContent=`${e[3]("Permissions")}`,n=y(),s=h("div"),o=h("div");for(let p=0;p<v.length;p+=1)v[p].c();r=y();for(let p=0;p<c.length;p+=1)c[p].c();u(o,"class","flex flex-row space-x-2"),u(s,"class","p-2 bg-white space-y-2"),u(t,"class","flex-1")},m(p,d){S(p,t,d),i(t,l),i(t,n),i(t,s),i(s,o);for(let a=0;a<v.length;a+=1)v[a].m(o,null);i(s,r);for(let a=0;a<c.length;a+=1)c[a].m(s,null)},p(p,d){if(d&6){g=p[2].permissions;let a;for(a=0;a<g.length;a+=1){const f=ft(p,g,a);v[a]?v[a].p(f,d):(v[a]=dt(f),v[a].c(),v[a].m(o,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=g.length}if(d&15){m=p[2].permissions;let a;for(a=0;a<m.length;a+=1){const f=ct(p,m,a);c[a]?c[a].p(f,d):(c[a]=ht(f),c[a].c(),c[a].m(s,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=m.length}},d(p){p&&A(t),V(v,p),V(c,p)}}}function dt(e){let t,l=e[9].name+"",n,s,o,r,g;function v(){return e[5](e[11])}return{c(){t=h("div"),n=G(l),s=y(),u(t,"class",o="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(e[1].name===e[9].name&&"bg-blue-500 text-white"))},m(m,c){S(m,t,c),i(t,n),i(t,s),r||(g=I(t,"click",v),r=!0)},p(m,c){e=m,c&2&&o!==(o="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(e[1].name===e[9].name&&"bg-blue-500 text-white"))&&u(t,"class",o)},d(m){m&&A(t),r=!1,g()}}}function Jt(e){let t,l,n,s;return{c(){t=F("svg"),l=F("path"),n=F("line"),s=F("line"),u(l,"stroke","none"),u(l,"d","M0 0h24v24H0z"),u(l,"fill","none"),u(n,"x1","18"),u(n,"y1","6"),u(n,"x2","6"),u(n,"y2","18"),u(s,"x1","6"),u(s,"y1","6"),u(s,"x2","18"),u(s,"y2","18"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"width","24"),u(t,"height","24"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"fill","none"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round")},m(o,r){S(o,t,r),i(t,l),i(t,n),i(t,s)},d(o){o&&A(t)}}}function Qt(e){let t,l,n,s;return{c(){t=F("svg"),l=F("path"),n=F("path"),s=F("path"),u(l,"stroke","none"),u(l,"d","M0 0h24v24H0z"),u(l,"fill","none"),u(n,"d","M7 12l5 5l10 -10"),u(s,"d","M2 12l5 5m5 -5l5 -5"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"width","24"),u(t,"height","24"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"fill","none"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round")},m(o,r){S(o,t,r),i(t,l),i(t,n),i(t,s)},d(o){o&&A(t)}}}function _t(e){let t,l,n,s,o=e[12]+"",r,g,v,m;e[7][0][e[11]]=[];function c(){e[6].call(l,e[9],e[11])}return{c(){t=h("label"),l=h("input"),n=y(),s=h("span"),r=G(o),g=y(),u(l,"type","checkbox"),l.__value=e[12],l.value=l.__value,u(l,"name",""+(e[2].names.permission+"["+e[9].name+"][capabilities][]")),e[7][0][e[11]].push(l)},m(p,d){S(p,t,d),i(t,l),l.checked=~e[0][e[9].name].capabilities.indexOf(l.__value),i(t,n),i(t,s),i(s,r),i(t,g),v||(m=I(l,"change",c),v=!0)},p(p,d){e=p,d&5&&(l.checked=~e[0][e[9].name].capabilities.indexOf(l.__value))},d(p){p&&A(t),e[7][0][e[11]].splice(e[7][0][e[11]].indexOf(l),1),v=!1,m()}}}function ht(e){let t,l,n,s,o,r,g,v,m;function c(_,M){return _[9].logged_required?Qt:Jt}let d=c(e)(e),a=e[9].capabilities||[],f=[];for(let _=0;_<a.length;_+=1)f[_]=_t(ut(e,a,_));return{c(){t=h("div"),l=h("div"),n=h("span"),n.textContent=`${e[3]("Signed required")}`,s=y(),d.c(),o=y(),r=h("div"),g=h("span"),g.textContent=`${e[3]("Capabilities")}`,v=y();for(let _=0;_<f.length;_+=1)f[_].c();m=y(),u(l,"class","flex items-center"),u(r,"class","flex items-center space-x-2"),u(t,"class","p-1"),fe(t,"hidden",e[9].name!==e[1].name)},m(_,M){S(_,t,M),i(t,l),i(l,n),i(l,s),d.m(l,null),i(t,o),i(t,r),i(r,g),i(r,v);for(let w=0;w<f.length;w+=1)f[w].m(r,null);i(t,m)},p(_,M){if(M&5){a=_[9].capabilities||[];let w;for(w=0;w<a.length;w+=1){const $=ut(_,a,w);f[w]?f[w].p($,M):(f[w]=_t($),f[w].c(),f[w].m(r,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=a.length}M&6&&fe(t,"hidden",_[9].name!==_[1].name)},d(_){_&&A(t),d.d(),V(f,_)}}}function Xt(e){let t,l,n,s,o,r,g,v,m,c,p,d,a,f,_=e[1]&&pt(e);return{c(){t=h("div"),l=h("div"),n=h("div"),s=h("label"),o=h("div"),o.textContent=`${e[3]("Abstract")}`,r=y(),g=h("textarea"),v=y(),m=h("div"),c=h("label"),p=h("div"),p.textContent=`${e[3]("Decorative image")}`,d=y(),a=h("input"),f=y(),_&&_.c(),u(g,"name",e[2].names.abstract),u(g,"class","w-full"),g.value=e[2].abstract,u(n,"class","flex flex-col"),u(a,"type","file"),u(a,"accept","image/png, image/jpeg"),u(a,"name",e[2].names.image),u(m,"class","flex flex-col"),u(l,"class","space-y-3 flex-1"),u(t,"class","flex flex-row space-x-2")},m(M,w){S(M,t,w),i(t,l),i(l,n),i(n,s),i(s,o),i(s,r),i(s,g),i(l,v),i(l,m),i(m,c),i(c,p),i(c,d),i(c,a),i(t,f),_&&_.m(t,null)},p(M,[w]){M[1]?_?_.p(M,w):(_=pt(M),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:O,o:O,d(M){M&&A(t),_&&_.d()}}}function Yt(e,t,l){const n={names:{abstract:"mc_metabox_abstract",image:"mc_metabox_image",permission:"mc_metabox_permission"},abstract:"",permissions:[],selections:{},i18n:{}};let{config:s={}}=t;s.permissions||(s.permissions=[]);const o=ue(ue({},n),s||{});Ge(o.permissions,o.selections||[],d=>d.name,d=>({name:d.name,post_types:[],capabilities:[]}));const r=Ie(o.selections,d=>d.name),g=Ae(o.i18n);let v=o.permissions[0];const m=[[]],c=d=>l(1,v=o.permissions[d]);function p(d,a){r[d.name].capabilities=be(m[0][a],this.__value,this.checked),l(0,r)}return e.$$set=d=>{"config"in d&&l(4,s=d.config)},[r,v,o,g,s,c,p,m]}class Zt extends Pe{constructor(t){super();Ee(this,t,Yt,Xt,ve,{config:4})}}function Se(e,t){Array.from(document.getElementsByClassName(e)).forEach(l=>t(l))}function xt(e,t){Se(e,l=>new Gt({target:l,props:{config:t}}))}function el(e,t){Se(e,l=>new Ft({target:l,props:{config:t}}))}function tl(e,t){Se(e,l=>new Zt({target:l,props:{config:t}}))}j.renderMetaPost=tl,j.renderPermissionEditor=el,j.renderUserPermissions=xt,Object.defineProperty(j,"__esModule",{value:!0}),j[Symbol.toStringTag]="Module"});
