var sl=Object.defineProperty;var Ot=Object.getOwnPropertySymbols;var ol=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable;var Tt=(j,D,O)=>D in j?sl(j,D,{enumerable:!0,configurable:!0,writable:!0,value:O}):j[D]=O,fe=(j,D)=>{for(var O in D||(D={}))ol.call(D,O)&&Tt(j,O,D[O]);if(Ot)for(var O of Ot(D))al.call(D,O)&&Tt(j,O,D[O]);return j};(function(j,D){typeof exports=="object"&&typeof module!="undefined"?D(exports):typeof define=="function"&&define.amd?define(["exports"],D):(j=typeof globalThis!="undefined"?globalThis:j||self,D(j.MC_SVELTE_LIB={}))})(this,function(j){"use strict";var D="";function O(){}function He(e){return e()}function Le(){return Object.create(null)}function Z(e){e.forEach(He)}function jt(e){return typeof e=="function"}function be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Dt(e){return Object.keys(e).length===0}function i(e,t){e.appendChild(t)}function S(e,t,l){e.insertBefore(t,l||null)}function A(e){e.parentNode.removeChild(e)}function V(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function h(e){return document.createElement(e)}function F(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function G(e){return document.createTextNode(e)}function y(){return G(" ")}function I(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function c(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function ke(e,t,l){const n=new Set;for(let o=0;o<e.length;o+=1)e[o].checked&&n.add(e[o].__value);return l||n.delete(t),Array.from(n)}function Nt(e){return Array.from(e.childNodes)}function we(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function pe(e,t,l){e.classList[l?"add":"remove"](t)}let ye;function se(e){ye=e}const oe=[],Ce=[],de=[],Ue=[],qt=Promise.resolve();let $e=!1;function Ht(){$e||($e=!0,qt.then(ze))}function Me(e){de.push(e)}const Ee=new Set;let _e=0;function ze(){const e=ye;do{for(;_e<oe.length;){const t=oe[_e];_e++,se(t),Lt(t.$$)}for(se(null),oe.length=0,_e=0;Ce.length;)Ce.pop()();for(let t=0;t<de.length;t+=1){const l=de[t];Ee.has(l)||(Ee.add(l),l())}de.length=0}while(oe.length);for(;Ue.length;)Ue.pop()();$e=!1,Ee.clear(),se(e)}function Lt(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Me)}}const Ut=new Set;function Be(e,t){e&&e.i&&(Ut.delete(e),e.i(t))}function Re(e,t){e.d(1),t.delete(e.key)}function Ie(e,t,l,n,o,s,r,g,v,m,u,p){let d=e.length,a=s.length,f=d;const _={};for(;f--;)_[e[f].key]=f;const M=[],w=new Map,$=new Map;for(f=a;f--;){const b=p(o,s,f),P=l(b);let N=r.get(P);N?n&&N.p(b,t):(N=m(P,b),N.c()),w.set(P,M[f]=N),P in _&&$.set(P,Math.abs(f-_[P]))}const T=new Set,E=new Set;function q(b){Be(b,1),b.m(g,u),r.set(b.key,b),u=b.first,a--}for(;d&&a;){const b=M[a-1],P=e[d-1],N=b.key,W=P.key;b===P?(u=b.first,d--,a--):w.has(W)?!r.has(N)||T.has(N)?q(b):E.has(W)?d--:$.get(N)>$.get(W)?(E.add(N),q(b)):(T.add(W),d--):(v(P,r),d--)}for(;d--;){const b=e[d];w.has(b.key)||v(b,r)}for(;a;)q(M[a-1]);return M}function zt(e,t,l,n){const{fragment:o,on_mount:s,on_destroy:r,after_update:g}=e.$$;o&&o.m(t,l),n||Me(()=>{const v=s.map(He).filter(jt);r?r.push(...v):Z(v),e.$$.on_mount=[]}),g.forEach(Me)}function Bt(e,t){const l=e.$$;l.fragment!==null&&(Z(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Rt(e,t){e.$$.dirty[0]===-1&&(oe.push(e),Ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Pe(e,t,l,n,o,s,r,g=[-1]){const v=ye;se(e);const m=e.$$={fragment:null,ctx:null,props:s,update:O,not_equal:o,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(v?v.$$.context:[])),callbacks:Le(),dirty:g,skip_bound:!1,root:t.target||v.$$.root};r&&r(m.root);let u=!1;if(m.ctx=l?l(e,t.props||{},(p,d,...a)=>{const f=a.length?a[0]:d;return m.ctx&&o(m.ctx[p],m.ctx[p]=f)&&(!m.skip_bound&&m.bound[p]&&m.bound[p](f),u&&Rt(e,p)),d}):[],m.update(),u=!0,Z(m.before_update),m.fragment=n?n(m.ctx):!1,t.target){if(t.hydrate){const p=Nt(t.target);m.fragment&&m.fragment.l(p),p.forEach(A)}else m.fragment&&m.fragment.c();t.intro&&Be(e.$$.fragment),zt(e,t.target,t.anchor,t.customElement),ze()}se(v)}class Ae{$destroy(){Bt(this,1),this.$destroy=O}$on(t,l){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!Dt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Se(e){return t=>e[t]||t}function Ge(e,t){return Array.isArray(e)?e.reduce((l,n)=>(l[t(n)]=n,l),{}):e}function Ke(e,t,l,n){if(Array.isArray(t)){const o=Ge(t,l);e.forEach(s=>{const r=l(s);o[r]||t.push(n(s))})}else e.forEach(o=>{const s=l(o);t[s]||(t[s]=n(o))})}function Ve(e,t,l){const n=e.slice();return n[11]=t[l],n[12]=t,n[13]=l,n}function We(e,t,l){const n=e.slice();return n[14]=t[l],n}function Fe(e,t,l){const n=e.slice();return n[14]=t[l],n}function Je(e,t,l){const n=e.slice();return n[11]=t[l],n[13]=l,n}function Qe(e,t){let l,n=t[11].name+"",o,s,r,g,v;function m(){return t[6](t[13])}return{key:e,first:null,c(){l=h("div"),o=G(n),s=y(),c(l,"class",r="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(t[2].name===t[11].name&&"bg-blue-500 text-white")),this.first=l},m(u,p){S(u,l,p),i(l,o),i(l,s),g||(v=I(l,"click",m),g=!0)},p(u,p){t=u,p&4&&r!==(r="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(t[2].name===t[11].name&&"bg-blue-500 text-white"))&&c(l,"class",r)},d(u){u&&A(l),g=!1,v()}}}function Xe(e){let t,l,n,o,s,r,g=e[14]+"",v,m,u,p;e[8][1][e[13]]=[];function d(){e[7].call(n,e[11],e[13])}return{c(){t=h("div"),l=h("label"),n=h("input"),s=y(),r=h("span"),v=G(g),m=y(),c(n,"type","checkbox"),n.__value=e[14],n.value=n.__value,c(n,"name",o=""+(e[0].names.permission+"["+e[11].name+"][post_types][]")),e[8][1][e[13]].push(n)},m(a,f){S(a,t,f),i(t,l),i(l,n),n.checked=~e[1][e[11].name].post_types.indexOf(n.__value),i(l,s),i(l,r),i(r,v),i(t,m),u||(p=I(n,"change",d),u=!0)},p(a,f){e=a,f&1&&o!==(o=""+(e[0].names.permission+"["+e[11].name+"][post_types][]"))&&c(n,"name",o),f&10&&(n.checked=~e[1][e[11].name].post_types.indexOf(n.__value))},d(a){a&&A(t),e[8][1][e[13]].splice(e[8][1][e[13]].indexOf(n),1),u=!1,p()}}}function Ye(e){let t,l,n,o,s,r,g=e[14]+"",v,m,u,p;e[8][0][e[13]]=[];function d(){e[9].call(n,e[11],e[13])}return{c(){t=h("div"),l=h("label"),n=h("input"),s=y(),r=h("span"),v=G(g),m=y(),c(n,"type","checkbox"),n.__value=e[14],n.value=n.__value,c(n,"name",o=""+(e[0].names.permission+"["+e[11].name+"][capabilities][]")),e[8][0][e[13]].push(n)},m(a,f){S(a,t,f),i(t,l),i(l,n),n.checked=~e[1][e[11].name].capabilities.indexOf(n.__value),i(l,s),i(l,r),i(r,v),i(t,m),u||(p=I(n,"change",d),u=!0)},p(a,f){e=a,f&1&&o!==(o=""+(e[0].names.permission+"["+e[11].name+"][capabilities][]"))&&c(n,"name",o),f&10&&(n.checked=~e[1][e[11].name].capabilities.indexOf(n.__value))},d(a){a&&A(t),e[8][0][e[13]].splice(e[8][0][e[13]].indexOf(n),1),u=!1,p()}}}function Ze(e,t){let l,n,o,s,r,g,v,m,u,p,d,a,f=t[11].post_types,_=[];for(let $=0;$<f.length;$+=1)_[$]=Xe(Fe(t,f,$));let M=t[11].capabilities||[],w=[];for(let $=0;$<M.length;$+=1)w[$]=Ye(We(t,M,$));return{key:e,first:null,c(){l=h("input"),o=y(),s=h("div"),r=h("div"),g=h("div"),g.textContent=`${t[4]("Post types")}`,v=y();for(let $=0;$<_.length;$+=1)_[$].c();m=y(),u=h("div"),p=h("div"),p.textContent=`${t[4]("Capabilities")}`,d=y();for(let $=0;$<w.length;$+=1)w[$].c();a=y(),c(l,"type","hidden"),l.value=t[11].name,c(l,"name",n=""+(t[0].names.permission+"["+t[11].name+"][name]")),c(r,"class","flex-1"),c(u,"class","flex-1"),c(s,"class","p-2 flex flex-row"),pe(s,"hidden",t[11].name!==t[2].name),this.first=l},m($,T){S($,l,T),S($,o,T),S($,s,T),i(s,r),i(r,g),i(r,v);for(let E=0;E<_.length;E+=1)_[E].m(r,null);i(s,m),i(s,u),i(u,p),i(u,d);for(let E=0;E<w.length;E+=1)w[E].m(u,null);i(s,a)},p($,T){if(t=$,T&1&&n!==(n=""+(t[0].names.permission+"["+t[11].name+"][name]"))&&c(l,"name",n),T&11){f=t[11].post_types;let E;for(E=0;E<f.length;E+=1){const q=Fe(t,f,E);_[E]?_[E].p(q,T):(_[E]=Xe(q),_[E].c(),_[E].m(r,null))}for(;E<_.length;E+=1)_[E].d(1);_.length=f.length}if(T&11){M=t[11].capabilities||[];let E;for(E=0;E<M.length;E+=1){const q=We(t,M,E);w[E]?w[E].p(q,T):(w[E]=Ye(q),w[E].c(),w[E].m(u,null))}for(;E<w.length;E+=1)w[E].d(1);w.length=M.length}T&12&&pe(s,"hidden",t[11].name!==t[2].name)},d($){$&&A(l),$&&A(o),$&&A(s),V(_,$),V(w,$)}}}function It(e){let t,l,n=[],o=new Map,s,r=[],g=new Map,v=e[3];const m=d=>d[11].name;for(let d=0;d<v.length;d+=1){let a=Je(e,v,d),f=m(a);o.set(f,n[d]=Qe(f,a))}let u=e[3];const p=d=>d[11].name;for(let d=0;d<u.length;d+=1){let a=Ve(e,u,d),f=p(a);g.set(f,r[d]=Ze(f,a))}return{c(){t=h("div"),l=h("div");for(let d=0;d<n.length;d+=1)n[d].c();s=y();for(let d=0;d<r.length;d+=1)r[d].c();c(l,"class","flex flex-row space-x-2"),c(t,"class","bg-white p-2 rounded")},m(d,a){S(d,t,a),i(t,l);for(let f=0;f<n.length;f+=1)n[f].m(l,null);i(t,s);for(let f=0;f<r.length;f+=1)r[f].m(t,null)},p(d,[a]){a&12&&(v=d[3],n=Ie(n,a,m,1,d,v,o,l,Re,Qe,null,Je)),a&31&&(u=d[3],r=Ie(r,a,p,1,d,u,g,t,Re,Ze,null,Ve))},i:O,o:O,d(d){d&&A(t);for(let a=0;a<n.length;a+=1)n[a].d();for(let a=0;a<r.length;a+=1)r[a].d()}}}function Gt(e,t,l){const n={names:{permission:"mc_metabox_permission"},selections:{},i18n:{}};let{config:o={permissions:[],selections:{},i18n:{}}}=t;console.log(o);const s=fe(fe({},n),o||{});s.selections||(s.selections={}),Ke(s.permissions,s.selections||{},f=>f.name,f=>({name:f.name,post_types:[],capabilities:[]})),Object.keys(s.selections||{}).forEach(f=>{const _=s.selections[f];_.post_types=_.post_types||[],_.capabilities=_.capabilities||[]});const r=s.permissions,g=s.selections,v=Se(s.i18n||{});let m=r[0];const u=[[],[]],p=f=>l(2,m=r[f]);function d(f,_){g[f.name].post_types=ke(u[1][_],this.__value,this.checked),l(1,g)}function a(f,_){g[f.name].capabilities=ke(u[0][_],this.__value,this.checked),l(1,g)}return e.$$set=f=>{"config"in f&&l(5,o=f.config)},[s,g,m,r,v,o,p,d,u,a]}class Kt extends Ae{constructor(t){super();Pe(this,t,Gt,It,be,{config:5})}}function xe(e,t,l){const n=e.slice();return n[20]=t[l],n[21]=t,n[22]=l,n}function et(e,t,l){const n=e.slice();return n[23]=t[l],n}function tt(e,t,l){const n=e.slice();return n[23]=t[l],n}function lt(e,t,l){const n=e.slice();return n[28]=t[l],n[30]=l,n}function nt(e,t,l){const n=e.slice();return n[23]=t[l],n}function it(e){let t,l,n,o,s,r=e[23]+"",g,v;return{c(){t=h("label"),l=h("input"),o=y(),s=h("span"),g=G(r),v=y(),c(l,"type","checkbox"),l.value=e[23],c(l,"name","permissions["+e[22]+"][post_types][]"),l.checked=n=e[20].post_types.includes(e[23]),c(t,"class","flex items-center")},m(m,u){S(m,t,u),i(t,l),i(t,o),i(t,s),i(s,g),i(t,v)},p(m,u){u[0]&1&&n!==(n=m[20].post_types.includes(m[23]))&&(l.checked=n)},d(m){m&&A(t)}}}function st(e){let t,l,n,o,s,r,g=e[28]+"",v,m,u,p,d,a;function f(){return e[13](e[20],e[30],e[21],e[22])}return{c(){t=h("div"),l=h("input"),o=y(),s=h("div"),r=h("span"),v=G(g),m=y(),u=h("span"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',p=y(),c(l,"type","hidden"),l.value=n=e[28],c(l,"name","permissions["+e[22]+"][capabilities][]"),c(u,"class","ml-2 font-bold"),c(s,"class","flex shadow items-center rounded mr-1 px-1"),c(t,"class","w-auto")},m(_,M){S(_,t,M),i(t,l),i(t,o),i(t,s),i(s,r),i(r,v),i(s,m),i(s,u),i(t,p),d||(a=I(u,"click",f),d=!0)},p(_,M){e=_,M[0]&1&&n!==(n=e[28])&&(l.value=n),M[0]&1&&g!==(g=e[28]+"")&&we(v,g)},d(_){_&&A(t),d=!1,a()}}}function ot(e){let t,l,n,o,s,r,g=e[23]+"",v,m;return{c(){t=h("label"),l=h("input"),s=y(),r=h("span"),v=G(g),m=y(),c(l,"type","checkbox"),l.value=n=e[23],c(l,"name","defaults[permissions]["+e[22]+"][post_types][]"),l.checked=o=e[0].defaults.permissions[e[22]].post_types.includes(e[23]),c(t,"class","flex items-center")},m(u,p){S(u,t,p),i(t,l),i(t,s),i(t,r),i(r,v),i(t,m)},p(u,p){p[0]&1&&n!==(n=u[23])&&(l.value=n),p[0]&1&&o!==(o=u[0].defaults.permissions[u[22]].post_types.includes(u[23]))&&(l.checked=o),p[0]&1&&g!==(g=u[23]+"")&&we(v,g)},d(u){u&&A(t)}}}function at(e){let t,l,n,o,s,r,g=e[23]+"",v,m;return{c(){t=h("div"),l=h("input"),s=y(),r=h("span"),v=G(g),m=y(),c(l,"type","checkbox"),l.value=n=e[23],c(l,"name","defaults[permissions]["+e[22]+"][capabilities][]"),l.checked=o=e[0].defaults.permissions[e[22]].capabilities.includes(e[23]),c(t,"class","flex items-center")},m(u,p){S(u,t,p),i(t,l),i(t,s),i(t,r),i(r,v),i(t,m)},p(u,p){p[0]&1&&n!==(n=u[23])&&(l.value=n),p[0]&1&&o!==(o=u[0].defaults.permissions[u[22]].capabilities.includes(u[23]))&&(l.checked=o),p[0]&1&&g!==(g=u[23]+"")&&we(v,g)},d(u){u&&A(t)}}}function Vt(e){let t,l,n;function o(){return e[14](e[22])}return{c(){t=h("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="cursor-pointer" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 15l-6 -6l-6 6h12"></path></svg>',c(t,"title","Move up")},m(s,r){S(s,t,r),l||(n=I(t,"click",o),l=!0)},p(s,r){e=s},d(s){s&&A(t),l=!1,n()}}}function rt(e){let t,l,n;function o(){return e[15](e[22])}return{c(){t=h("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="cursor-pointer" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 15l-6 -6l-6 6h12" transform="rotate(180 12 12)"></path></svg>',c(t,"title","Move down")},m(s,r){S(s,t,r),l||(n=I(t,"click",o),l=!0)},p(s,r){e=s},d(s){s&&A(t),l=!1,n()}}}function ct(e){let t,l,n,o,s,r,g,v=e[5]("Name")+"",m,u,p,d,a,f,_,M,w,$,T,E,q,b,P,N,W,J,Te,gt,he,vt,ae,bt,x,me,kt,ee,re,je,wt,ge,yt,ce,De,Ct,ve,$t,Q,X,Mt,Et,Ne,Pt,ue,At,qe,St,te=e[4],H=[];for(let C=0;C<te.length;C+=1)H[C]=it(nt(e,te,C));function nl(...C){return e[12](e[22],...C)}let le=e[20].capabilities||[],L=[];for(let C=0;C<le.length;C+=1)L[C]=st(lt(e,le,C));let ne=e[20].post_types,U=[];for(let C=0;C<ne.length;C+=1)U[C]=ot(tt(e,ne,C));let ie=e[20].capabilities||[],z=[];for(let C=0;C<ie.length;C+=1)z[C]=at(et(e,ie,C));let Y=e[22]>0&&Vt(e),B=e[22]<e[0].permissions.length-1&&rt(e);function il(...C){return e[16](e[22],...C)}return{c(){t=h("div"),l=h("div"),n=h("div"),o=h("p"),o.textContent=`${e[5]("Configuration")}`,s=y(),r=h("div"),g=h("label"),m=G(v),u=y(),p=h("input"),f=y(),_=h("label"),M=h("input"),T=y(),E=h("span"),E.textContent=`${e[5]("Signed required")}`,q=y(),b=h("div"),P=h("span"),P.textContent=`${e[5]("Post type")}`,N=y();for(let C=0;C<H.length;C+=1)H[C].c();W=y(),J=h("div"),Te=h("span"),Te.textContent=`${e[5]("Capabilities")}`,gt=y(),he=h("input"),vt=y(),ae=h("div");for(let C=0;C<L.length;C+=1)L[C].c();bt=y(),x=h("div"),me=h("p"),me.textContent=`${e[5]("Default user registry behavior")}`,kt=y(),ee=h("div"),re=h("div"),je=h("p"),je.textContent=`${e[5]("Default posts")}`,wt=y(),ge=h("div");for(let C=0;C<U.length;C+=1)U[C].c();yt=y(),ce=h("div"),De=h("p"),De.textContent=`${e[5]("Default capabilities")}`,Ct=y(),ve=h("div");for(let C=0;C<z.length;C+=1)z[C].c();$t=y(),Q=h("div"),X=h("div"),Y&&Y.c(),Mt=y(),B&&B.c(),Et=y(),Ne=h("div"),Pt=y(),ue=h("div"),ue.textContent=`${e[5]("Delete")}`,At=y(),c(o,"class","font-bold"),c(p,"type","text"),c(p,"name",d="permissions["+e[22]+"][name]"),p.value=a=e[20].name,c(p,"class","w-auto"),c(g,"class","flex flex-col"),c(M,"type","checkbox"),c(M,"name",w="permissions["+e[22]+"][logged_required]'"),M.checked=$=e[20].logged_required==="on",c(he,"type","text"),c(ae,"class","flex flex-wrap"),c(J,"class","flex flex-col space-y-1 flex-1"),c(r,"class","flex flex-col space-y-1"),c(n,"class","flex-1"),c(me,"class","font-bold"),c(ee,"class","flex flex-row space-x-2"),c(x,"class","flex-1 "),c(l,"class","flex space-x-2"),c(X,"class","flex flex-col "),c(Ne,"class","flex-1"),c(ue,"class","p-2 bg-red-500 rounded text-white "),c(Q,"class","flex items-center "),c(t,"class","rounded bg-white p-2")},m(C,R){S(C,t,R),i(t,l),i(l,n),i(n,o),i(n,s),i(n,r),i(r,g),i(g,m),i(g,u),i(g,p),i(r,f),i(r,_),i(_,M),i(_,T),i(_,E),i(r,q),i(r,b),i(b,P),i(b,N);for(let k=0;k<H.length;k+=1)H[k].m(b,null);i(r,W),i(r,J),i(J,Te),i(J,gt),i(J,he),i(J,vt),i(J,ae);for(let k=0;k<L.length;k+=1)L[k].m(ae,null);i(l,bt),i(l,x),i(x,me),i(x,kt),i(x,ee),i(ee,re),i(re,je),i(re,wt),i(re,ge);for(let k=0;k<U.length;k+=1)U[k].m(ge,null);i(ee,yt),i(ee,ce),i(ce,De),i(ce,Ct),i(ce,ve);for(let k=0;k<z.length;k+=1)z[k].m(ve,null);i(t,$t),i(t,Q),i(Q,X),Y&&Y.m(X,null),i(X,Mt),B&&B.m(X,null),i(Q,Et),i(Q,Ne),i(Q,Pt),i(Q,ue),i(t,At),qe||(St=[I(he,"keypress",nl),I(ue,"click",il)],qe=!0)},p(C,R){if(e=C,R[0]&1&&a!==(a=e[20].name)&&p.value!==a&&(p.value=a),R[0]&1&&$!==($=e[20].logged_required==="on")&&(M.checked=$),R[0]&17){te=e[4];let k;for(k=0;k<te.length;k+=1){const K=nt(e,te,k);H[k]?H[k].p(K,R):(H[k]=it(K),H[k].c(),H[k].m(b,null))}for(;k<H.length;k+=1)H[k].d(1);H.length=te.length}if(R[0]&1){le=e[20].capabilities||[];let k;for(k=0;k<le.length;k+=1){const K=lt(e,le,k);L[k]?L[k].p(K,R):(L[k]=st(K),L[k].c(),L[k].m(ae,null))}for(;k<L.length;k+=1)L[k].d(1);L.length=le.length}if(R[0]&1){ne=e[20].post_types;let k;for(k=0;k<ne.length;k+=1){const K=tt(e,ne,k);U[k]?U[k].p(K,R):(U[k]=ot(K),U[k].c(),U[k].m(ge,null))}for(;k<U.length;k+=1)U[k].d(1);U.length=ne.length}if(R[0]&1){ie=e[20].capabilities||[];let k;for(k=0;k<ie.length;k+=1){const K=et(e,ie,k);z[k]?z[k].p(K,R):(z[k]=at(K),z[k].c(),z[k].m(ve,null))}for(;k<z.length;k+=1)z[k].d(1);z.length=ie.length}e[22]>0&&Y.p(e,R),e[22]<e[0].permissions.length-1?B?B.p(e,R):(B=rt(e),B.c(),B.m(X,null)):B&&(B.d(1),B=null)},d(C){C&&A(t),V(H,C),V(L,C),V(U,C),V(z,C),Y&&Y.d(),B&&B.d(),qe=!1,Z(St)}}}function Wt(e){let t,l,n,o,s,r,g,v,m,u,p,d,a=e[0].permissions,f=[];for(let _=0;_<a.length;_+=1)f[_]=ct(xe(e,a,_));return{c(){t=h("div"),l=h("div"),n=h("button"),n.textContent=`${e[5]("Save settings")}`,o=y(),s=h("button"),s.textContent=`${e[5]("Add new")}`,r=y(),g=h("details"),v=h("summary"),v.textContent=`${e[5]("Permissions")}`,m=y(),u=h("form");for(let _=0;_<f.length;_+=1)f[_].c();c(n,"class","bg-blue-500 text-white rounded p-1"),c(s,"class","border-1 border-blue-500 rounded p-1 bg-white"),c(l,"class","flex flex-row space-x-2 mt-2"),c(u,"action",e[2]),c(u,"method","post"),c(u,"class","space-y-2"),g.open=!0,c(t,"class","space-y-2")},m(_,M){S(_,t,M),i(t,l),i(l,n),i(l,o),i(l,s),i(t,r),i(t,g),i(g,v),i(g,m),i(g,u);for(let w=0;w<f.length;w+=1)f[w].m(u,null);e[17](u),p||(d=[I(n,"click",e[10]),I(s,"click",e[11])],p=!0)},p(_,M){if(M[0]&1009){a=_[0].permissions;let w;for(w=0;w<a.length;w+=1){const $=xe(_,a,w);f[w]?f[w].p($,M):(f[w]=ct($),f[w].c(),f[w].m(u,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=a.length}},i:O,o:O,d(_){_&&A(t),V(f,_),e[17](null),p=!1,Z(d)}}}function Ft(e,t,l){let{config:n={postUrl:"",defaultPermission:{name:"New permission",logged_required:!0,post_types:[],capabilities:[]},post_types:["post","page","attachment"],permissions:[{name:"ShowProDir",logged_required:!1,post_types:["attachment"],capabilities:["CAN_READ","CAN_WRITE"]}],defaults:{permissions:[],capabilities:[]},i18n:{}}}=t;n.defaults=n.defaults||{},n.defaults.permissions=n.defaults.permissions||[...n.permissions];const o=n.defaults.permissions;for(let b=0;b<n.permissions.length;b++)o[b]=o[b]||n.permissions[b],o[b].post_types=o[b].post_types||[],o[b].capabilities=o[b].capabilities||[];const s=n.postUrl,r=n.defaultPermission,g=n.post_types;n.permissions;const v=Se(n.i18n);let m;function u(b,P){if(b.key==="Enter"){if(b.preventDefault(),b.target.value==="")return;l(0,n.permissions[P].capabilities=n.permissions[P].capabilities||[],n),l(0,n.permissions[P].capabilities=[...n.permissions[P].capabilities,b.target.value],n),b.target.value=""}}function p(b,P){P.preventDefault(),n.permissions.splice(b,1),l(0,n)}function d(b){const P=n.permissions[b-1];l(0,n.permissions[b-1]=n.permissions[b],n),l(0,n.permissions[b]=P,n)}function a(b){const P=n.permissions[b+1];l(0,n.permissions[b+1]=n.permissions[b],n),l(0,n.permissions[b]=P,n)}const f=()=>m.submit(),_=()=>l(0,n.permissions=[r,...n.permissions],n),M=(b,P)=>u(P,b),w=(b,P,N,W)=>{b.capabilities.splice(P,1),l(0,N[W].capabilities=b.capabilities,n)},$=b=>d(b),T=b=>a(b),E=(b,P)=>p(b,P);function q(b){Ce[b?"unshift":"push"](()=>{m=b,l(1,m)})}return e.$$set=b=>{"config"in b&&l(0,n=b.config)},[n,m,s,r,g,v,u,p,d,a,f,_,M,w,$,T,E,q]}class Jt extends Ae{constructor(t){super();Pe(this,t,Ft,Wt,be,{config:0},null,[-1,-1])}}function ut(e,t,l){const n=e.slice();return n[9]=t[l],n[10]=t,n[11]=l,n}function ft(e,t,l){const n=e.slice();return n[12]=t[l],n}function pt(e,t,l){const n=e.slice();return n[9]=t[l],n[11]=l,n}function dt(e){let t,l,n,o,s,r,g=e[2].permissions,v=[];for(let p=0;p<g.length;p+=1)v[p]=_t(pt(e,g,p));let m=e[2].permissions,u=[];for(let p=0;p<m.length;p+=1)u[p]=mt(ut(e,m,p));return{c(){t=h("div"),l=h("p"),l.textContent=`${e[3]("Permissions")}`,n=y(),o=h("div"),s=h("div");for(let p=0;p<v.length;p+=1)v[p].c();r=y();for(let p=0;p<u.length;p+=1)u[p].c();c(s,"class","flex flex-row space-x-2"),c(o,"class","p-2 bg-white space-y-2"),c(t,"class","flex-1")},m(p,d){S(p,t,d),i(t,l),i(t,n),i(t,o),i(o,s);for(let a=0;a<v.length;a+=1)v[a].m(s,null);i(o,r);for(let a=0;a<u.length;a+=1)u[a].m(o,null)},p(p,d){if(d&6){g=p[2].permissions;let a;for(a=0;a<g.length;a+=1){const f=pt(p,g,a);v[a]?v[a].p(f,d):(v[a]=_t(f),v[a].c(),v[a].m(s,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=g.length}if(d&15){m=p[2].permissions;let a;for(a=0;a<m.length;a+=1){const f=ut(p,m,a);u[a]?u[a].p(f,d):(u[a]=mt(f),u[a].c(),u[a].m(o,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=m.length}},d(p){p&&A(t),V(v,p),V(u,p)}}}function _t(e){let t,l=e[9].name+"",n,o,s,r,g;function v(){return e[5](e[11])}return{c(){t=h("div"),n=G(l),o=y(),c(t,"class",s="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(e[1].name===e[9].name&&"bg-blue-500 text-white"))},m(m,u){S(m,t,u),i(t,n),i(t,o),r||(g=I(t,"click",v),r=!0)},p(m,u){e=m,u&2&&s!==(s="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(e[1].name===e[9].name&&"bg-blue-500 text-white"))&&c(t,"class",s)},d(m){m&&A(t),r=!1,g()}}}function Qt(e){let t,l,n,o;return{c(){t=F("svg"),l=F("path"),n=F("line"),o=F("line"),c(l,"stroke","none"),c(l,"d","M0 0h24v24H0z"),c(l,"fill","none"),c(n,"x1","18"),c(n,"y1","6"),c(n,"x2","6"),c(n,"y2","18"),c(o,"x1","6"),c(o,"y1","6"),c(o,"x2","18"),c(o,"y2","18"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"width","24"),c(t,"height","24"),c(t,"viewBox","0 0 24 24"),c(t,"stroke-width","2"),c(t,"stroke","currentColor"),c(t,"fill","none"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round")},m(s,r){S(s,t,r),i(t,l),i(t,n),i(t,o)},d(s){s&&A(t)}}}function Xt(e){let t,l,n,o;return{c(){t=F("svg"),l=F("path"),n=F("path"),o=F("path"),c(l,"stroke","none"),c(l,"d","M0 0h24v24H0z"),c(l,"fill","none"),c(n,"d","M7 12l5 5l10 -10"),c(o,"d","M2 12l5 5m5 -5l5 -5"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"width","24"),c(t,"height","24"),c(t,"viewBox","0 0 24 24"),c(t,"stroke-width","2"),c(t,"stroke","currentColor"),c(t,"fill","none"),c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round")},m(s,r){S(s,t,r),i(t,l),i(t,n),i(t,o)},d(s){s&&A(t)}}}function ht(e){let t,l,n,o,s=e[12]+"",r,g,v,m;e[7][0][e[11]]=[];function u(){e[6].call(l,e[9],e[11])}return{c(){t=h("label"),l=h("input"),n=y(),o=h("span"),r=G(s),g=y(),c(l,"type","checkbox"),l.__value=e[12],l.value=l.__value,c(l,"name",""+(e[2].names.permission+"["+e[9].name+"][capabilities][]")),e[7][0][e[11]].push(l)},m(p,d){S(p,t,d),i(t,l),l.checked=~e[0][e[9].name].capabilities.indexOf(l.__value),i(t,n),i(t,o),i(o,r),i(t,g),v||(m=I(l,"change",u),v=!0)},p(p,d){e=p,d&5&&(l.checked=~e[0][e[9].name].capabilities.indexOf(l.__value))},d(p){p&&A(t),e[7][0][e[11]].splice(e[7][0][e[11]].indexOf(l),1),v=!1,m()}}}function mt(e){let t,l,n,o,s,r,g,v,m;function u(_,M){return _[9].logged_required?Xt:Qt}let d=u(e)(e),a=e[9].capabilities||[],f=[];for(let _=0;_<a.length;_+=1)f[_]=ht(ft(e,a,_));return{c(){t=h("div"),l=h("div"),n=h("span"),n.textContent=`${e[3]("Signed required")}`,o=y(),d.c(),s=y(),r=h("div"),g=h("span"),g.textContent=`${e[3]("Capabilities")}`,v=y();for(let _=0;_<f.length;_+=1)f[_].c();m=y(),c(l,"class","flex items-center"),c(r,"class","flex items-center space-x-2"),c(t,"class","p-1"),pe(t,"hidden",e[9].name!==e[1].name)},m(_,M){S(_,t,M),i(t,l),i(l,n),i(l,o),d.m(l,null),i(t,s),i(t,r),i(r,g),i(r,v);for(let w=0;w<f.length;w+=1)f[w].m(r,null);i(t,m)},p(_,M){if(M&5){a=_[9].capabilities||[];let w;for(w=0;w<a.length;w+=1){const $=ft(_,a,w);f[w]?f[w].p($,M):(f[w]=ht($),f[w].c(),f[w].m(r,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=a.length}M&6&&pe(t,"hidden",_[9].name!==_[1].name)},d(_){_&&A(t),d.d(),V(f,_)}}}function Yt(e){let t,l,n,o,s,r,g,v,m,u,p,d,a,f,_=e[1]&&dt(e);return{c(){t=h("div"),l=h("div"),n=h("div"),o=h("label"),s=h("div"),s.textContent=`${e[3]("Abstract")}`,r=y(),g=h("textarea"),v=y(),m=h("div"),u=h("label"),p=h("div"),p.textContent=`${e[3]("Decorative image")}`,d=y(),a=h("input"),f=y(),_&&_.c(),c(g,"name",e[2].names.abstract),c(g,"class","w-full"),g.value=e[2].abstract,c(n,"class","flex flex-col"),c(a,"type","file"),c(a,"accept","image/png, image/jpeg"),c(a,"name",e[2].names.image),c(m,"class","flex flex-col"),c(l,"class","space-y-3 flex-1"),c(t,"class","flex flex-row space-x-2")},m(M,w){S(M,t,w),i(t,l),i(l,n),i(n,o),i(o,s),i(o,r),i(o,g),i(l,v),i(l,m),i(m,u),i(u,p),i(u,d),i(u,a),i(t,f),_&&_.m(t,null)},p(M,[w]){M[1]?_?_.p(M,w):(_=dt(M),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:O,o:O,d(M){M&&A(t),_&&_.d()}}}function Zt(e,t,l){const n={names:{abstract:"mc_metabox_abstract",image:"mc_metabox_image",permission:"mc_metabox_permission"},abstract:"",permissions:[],selections:{},i18n:{}};let{config:o={}}=t;o.permissions||(o.permissions=[]);const s=fe(fe({},n),o||{});Ke(s.permissions,s.selections||[],d=>d.name,d=>({name:d.name,post_types:[],capabilities:[]}));const r=Ge(s.selections,d=>d.name),g=Se(s.i18n);let v=s.permissions[0];const m=[[]],u=d=>l(1,v=s.permissions[d]);function p(d,a){r[d.name].capabilities=ke(m[0][a],this.__value,this.checked),l(0,r)}return e.$$set=d=>{"config"in d&&l(4,o=d.config)},[r,v,s,g,o,u,p,m]}class xt extends Ae{constructor(t){super();Pe(this,t,Zt,Yt,be,{config:4})}}function Oe(e,t){Array.from(document.getElementsByClassName(e)).forEach(l=>t(l))}function el(e,t){Oe(e,l=>new Kt({target:l,props:{config:t}}))}function tl(e,t){Oe(e,l=>new Jt({target:l,props:{config:t}}))}function ll(e,t){Oe(e,l=>new xt({target:l,props:{config:t}}))}j.renderMetaPost=ll,j.renderPermissionEditor=tl,j.renderUserPermissions=el,Object.defineProperty(j,"__esModule",{value:!0}),j[Symbol.toStringTag]="Module"});
