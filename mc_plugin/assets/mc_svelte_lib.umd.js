var jt=Object.defineProperty;var st=Object.getOwnPropertySymbols;var Lt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var ot=(L,H,D)=>H in L?jt(L,H,{enumerable:!0,configurable:!0,writable:!0,value:D}):L[H]=D,se=(L,H)=>{for(var D in H||(H={}))Lt.call(H,D)&&ot(L,D,H[D]);if(st)for(var D of st(H))Rt.call(H,D)&&ot(L,D,H[D]);return L};(function(L,H){typeof exports=="object"&&typeof module!="undefined"?H(exports):typeof define=="function"&&define.amd?define(["exports"],H):(L=typeof globalThis!="undefined"?globalThis:L||self,H(L.MC_SVELTE_LIB={}))})(this,function(L){"use strict";var H="";function D(){}function ye(e){return e()}function Ce(){return Object.create(null)}function Z(e){e.forEach(ye)}function at(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function rt(e){return Object.keys(e).length===0}function i(e,t){e.appendChild(t)}function U(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode.removeChild(e)}function Q(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function K(e){return document.createTextNode(e)}function E(){return K(" ")}function ct(){return K("")}function I(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function oe(e,t,n){const l=new Set;for(let c=0;c<e.length;c+=1)e[c].checked&&l.add(e[c].__value);return n||l.delete(t),Array.from(l)}function ut(e){return Array.from(e.childNodes)}function ft(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Ee(e,t){e.value=t==null?"":t}function ae(e,t,n){e.classList[n?"add":"remove"](t)}let fe;function te(e){fe=e}const ne=[],_e=[],re=[],Me=[],_t=Promise.resolve();let de=!1;function dt(){de||(de=!0,_t.then(Ae))}function pe(e){re.push(e)}const he=new Set;let ce=0;function Ae(){const e=fe;do{for(;ce<ne.length;){const t=ne[ce];ce++,te(t),pt(t.$$)}for(te(null),ne.length=0,ce=0;_e.length;)_e.pop()();for(let t=0;t<re.length;t+=1){const n=re[t];he.has(n)||(he.add(n),n())}re.length=0}while(ne.length);for(;Me.length;)Me.pop()();de=!1,he.clear(),te(e)}function pt(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(pe)}}const ht=new Set;function $e(e,t){e&&e.i&&(ht.delete(e),e.i(t))}function Pe(e,t){e.d(1),t.delete(e.key)}function Oe(e,t,n,l,c,o,u,_,m,f,d,b){let a=e.length,s=o.length,r=a;const v={};for(;r--;)v[e[r].key]=r;const w=[],y=new Map,k=new Map;for(r=s;r--;){const P=b(c,o,r),j=n(P);let g=u.get(j);g?l&&g.p(P,t):(g=f(j,P),g.c()),y.set(j,w[r]=g),j in v&&k.set(j,Math.abs(r-v[j]))}const T=new Set,C=new Set;function q(P){$e(P,1),P.m(_,d),u.set(P.key,P),d=P.first,s--}for(;a&&s;){const P=w[s-1],j=e[a-1],g=P.key,M=j.key;P===j?(d=P.first,a--,s--):y.has(M)?!u.has(g)||T.has(g)?q(P):C.has(M)?a--:k.get(g)>k.get(M)?(C.add(g),q(P)):(T.add(M),a--):(m(j,u),a--)}for(;a--;){const P=e[a];y.has(P.key)||m(P,u)}for(;s;)q(w[s-1]);return w}function mt(e,t,n,l){const{fragment:c,on_mount:o,on_destroy:u,after_update:_}=e.$$;c&&c.m(t,n),l||pe(()=>{const m=o.map(ye).filter(at);u?u.push(...m):Z(m),e.$$.on_mount=[]}),_.forEach(pe)}function gt(e,t){const n=e.$$;n.fragment!==null&&(Z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function vt(e,t){e.$$.dirty[0]===-1&&(ne.push(e),dt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,l,c,o,u,_=[-1]){const m=fe;te(e);const f=e.$$={fragment:null,ctx:null,props:o,update:D,not_equal:c,bound:Ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:Ce(),dirty:_,skip_bound:!1,root:t.target||m.$$.root};u&&u(f.root);let d=!1;if(f.ctx=n?n(e,t.props||{},(b,a,...s)=>{const r=s.length?s[0]:a;return f.ctx&&c(f.ctx[b],f.ctx[b]=r)&&(!f.skip_bound&&f.bound[b]&&f.bound[b](r),d&&vt(e,b)),a}):[],f.update(),d=!0,Z(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const b=ut(t.target);f.fragment&&f.fragment.l(b),b.forEach(R)}else f.fragment&&f.fragment.c();t.intro&&$e(e.$$.fragment),mt(e,t.target,t.anchor,t.customElement),Ae()}te(m)}class ge{$destroy(){gt(this,1),this.$destroy=D}$on(t,n){const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const c=l.indexOf(n);c!==-1&&l.splice(c,1)}}$set(t){this.$$set&&!rt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ve(e){return t=>e[t]||t}function Se(e,t){return Array.isArray(e)?e.reduce((n,l)=>(n[t(l)]=l,n),{}):e}function Te(e,t,n,l){if(Array.isArray(t)){const c=Se(t,n);e.forEach(o=>{const u=n(o);c[u]||t.push(l(o))})}else e.forEach(c=>{const o=n(c);t[o]||(t[o]=l(c))})}function qe(e,t,n){const l=e.slice();return l[11]=t[n],l[12]=t,l[13]=n,l}function Ne(e,t,n){const l=e.slice();return l[14]=t[n],l}function De(e,t,n){const l=e.slice();return l[14]=t[n],l}function je(e,t,n){const l=e.slice();return l[11]=t[n],l[13]=n,l}function Le(e,t){let n,l=t[11].name+"",c,o,u,_,m;function f(){return t[6](t[13])}return{key:e,first:null,c(){n=p("div"),c=K(l),o=E(),h(n,"class",u="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(t[2].name===t[11].name&&"bg-blue-500 text-white")),this.first=n},m(d,b){U(d,n,b),i(n,c),i(n,o),_||(m=I(n,"click",f),_=!0)},p(d,b){t=d,b&4&&u!==(u="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(t[2].name===t[11].name&&"bg-blue-500 text-white"))&&h(n,"class",u)},d(d){d&&R(n),_=!1,m()}}}function Re(e){let t,n,l,c,o,u=e[14]+"",_,m,f,d;e[8][1][e[13]]=[];function b(){e[7].call(n,e[11],e[13])}return{c(){t=p("label"),n=p("input"),c=E(),o=p("span"),_=K(u),m=E(),h(n,"type","checkbox"),n.__value=e[14],n.value=n.__value,h(n,"name",l=""+(e[0].names.permission+"["+e[11].name+"][post_types][]")),e[8][1][e[13]].push(n)},m(a,s){U(a,t,s),i(t,n),n.checked=~e[1][e[11].name].post_types.indexOf(n.__value),i(t,c),i(t,o),i(o,_),i(t,m),f||(d=I(n,"change",b),f=!0)},p(a,s){e=a,s&1&&l!==(l=""+(e[0].names.permission+"["+e[11].name+"][post_types][]"))&&h(n,"name",l),s&10&&(n.checked=~e[1][e[11].name].post_types.indexOf(n.__value))},d(a){a&&R(t),e[8][1][e[13]].splice(e[8][1][e[13]].indexOf(n),1),f=!1,d()}}}function Ue(e){let t,n,l,c,o,u=e[14]+"",_,m,f,d;e[8][0][e[13]]=[];function b(){e[9].call(n,e[11],e[13])}return{c(){t=p("label"),n=p("input"),c=E(),o=p("span"),_=K(u),m=E(),h(n,"type","checkbox"),n.__value=e[14],n.value=n.__value,h(n,"name",l=""+(e[0].names.permission+"["+e[11].name+"][capabilities][]")),e[8][0][e[13]].push(n)},m(a,s){U(a,t,s),i(t,n),n.checked=~e[1][e[11].name].capabilities.indexOf(n.__value),i(t,c),i(t,o),i(o,_),i(t,m),f||(d=I(n,"change",b),f=!0)},p(a,s){e=a,s&1&&l!==(l=""+(e[0].names.permission+"["+e[11].name+"][capabilities][]"))&&h(n,"name",l),s&10&&(n.checked=~e[1][e[11].name].capabilities.indexOf(n.__value))},d(a){a&&R(t),e[8][0][e[13]].splice(e[8][0][e[13]].indexOf(n),1),f=!1,d()}}}function He(e,t){let n,l,c,o,u,_,m,f,d,b,a,s,r=t[11].post_types,v=[];for(let k=0;k<r.length;k+=1)v[k]=Re(De(t,r,k));let w=t[11].capabilities,y=[];for(let k=0;k<w.length;k+=1)y[k]=Ue(Ne(t,w,k));return{key:e,first:null,c(){n=p("div"),l=p("input"),o=E(),u=p("div"),u.textContent=`${t[4]("Contents")}`,_=E(),m=p("div");for(let k=0;k<v.length;k+=1)v[k].c();f=E(),d=p("div"),d.textContent=`${t[4]("Capabilities")}`,b=E(),a=p("div");for(let k=0;k<y.length;k+=1)y[k].c();s=E(),h(l,"type","hidden"),l.value=t[11].name,h(l,"name",c=""+(t[0].names.permission+"["+t[11].name+"][name]")),h(m,"class","space-x-2"),h(a,"class","space-x-2"),h(n,"class","p-2"),ae(n,"hidden",t[11].name!==t[2].name),this.first=n},m(k,T){U(k,n,T),i(n,l),i(n,o),i(n,u),i(n,_),i(n,m);for(let C=0;C<v.length;C+=1)v[C].m(m,null);i(n,f),i(n,d),i(n,b),i(n,a);for(let C=0;C<y.length;C+=1)y[C].m(a,null);i(n,s)},p(k,T){if(t=k,T&1&&c!==(c=""+(t[0].names.permission+"["+t[11].name+"][name]"))&&h(l,"name",c),T&11){r=t[11].post_types;let C;for(C=0;C<r.length;C+=1){const q=De(t,r,C);v[C]?v[C].p(q,T):(v[C]=Re(q),v[C].c(),v[C].m(m,null))}for(;C<v.length;C+=1)v[C].d(1);v.length=r.length}if(T&11){w=t[11].capabilities;let C;for(C=0;C<w.length;C+=1){const q=Ne(t,w,C);y[C]?y[C].p(q,T):(y[C]=Ue(q),y[C].c(),y[C].m(a,null))}for(;C<y.length;C+=1)y[C].d(1);y.length=w.length}T&12&&ae(n,"hidden",t[11].name!==t[2].name)},d(k){k&&R(n),Q(v,k),Q(y,k)}}}function bt(e){let t,n,l=[],c=new Map,o,u=[],_=new Map,m=e[3];const f=a=>a[11].name;for(let a=0;a<m.length;a+=1){let s=je(e,m,a),r=f(s);c.set(r,l[a]=Le(r,s))}let d=e[3];const b=a=>a[11].name;for(let a=0;a<d.length;a+=1){let s=qe(e,d,a),r=b(s);_.set(r,u[a]=He(r,s))}return{c(){t=p("div"),n=p("div");for(let a=0;a<l.length;a+=1)l[a].c();o=E();for(let a=0;a<u.length;a+=1)u[a].c();h(n,"class","flex flex-row space-x-2"),h(t,"class","bg-white p-2 rounded")},m(a,s){U(a,t,s),i(t,n);for(let r=0;r<l.length;r+=1)l[r].m(n,null);i(t,o);for(let r=0;r<u.length;r+=1)u[r].m(t,null)},p(a,[s]){s&12&&(m=a[3],l=Oe(l,s,f,1,a,m,c,n,Pe,Le,null,je)),s&31&&(d=a[3],u=Oe(u,s,b,1,a,d,_,t,Pe,He,null,qe))},i:D,o:D,d(a){a&&R(t);for(let s=0;s<l.length;s+=1)l[s].d();for(let s=0;s<u.length;s+=1)u[s].d()}}}function kt(e,t,n){const l={names:{permission:"mc_metabox_permission"},selections:{},i18n:{}};let{config:c={permissions:[],selections:{},i18n:{}}}=t;const o=se(se({},l),c||{});o.selections||(o.selections={}),Te(o.permissions,o.selections||{},r=>r.name,r=>({name:r.name,post_types:[],capabilities:[]})),Object.keys(o.selections||{}).forEach(r=>{const v=o.selections[r];v.post_types=v.post_types||[],v.capabilities=v.capabilities||[]});const u=o.permissions,_=o.selections,m=ve(o.i18n||{});let f=u[0];const d=[[],[]],b=r=>n(2,f=u[r]);function a(r,v){_[r.name].post_types=oe(d[1][v],this.__value,this.checked),n(1,_)}function s(r,v){_[r.name].capabilities=oe(d[0][v],this.__value,this.checked),n(1,_)}return e.$$set=r=>{"config"in r&&n(5,c=r.config)},[o,_,f,u,m,c,b,a,d,s]}class wt extends ge{constructor(t){super();me(this,t,kt,bt,ue,{config:5})}}function Ie(e,t,n){const l=e.slice();return l[22]=t[n],l[23]=t,l[24]=n,l}function ze(e,t,n){const l=e.slice();return l[25]=t[n],l[27]=n,l}function Be(e,t,n){const l=e.slice();return l[28]=t[n],l}function We(e){let t,n,l,c=e[28]+"",o,u,_,m;e[14][0][e[24]]=[];function f(){e[13].call(n,e[23],e[24])}return{c(){t=p("label"),n=p("input"),l=E(),o=K(c),u=E(),h(n,"type","checkbox"),n.__value=e[28],n.value=n.__value,h(n,"name","permissions["+e[24]+"][post_types][]"),e[14][0][e[24]].push(n)},m(d,b){U(d,t,b),i(t,n),n.checked=~e[22].post_types.indexOf(n.__value),i(t,l),i(t,o),i(t,u),_||(m=I(n,"change",f),_=!0)},p(d,b){e=d,b&1&&(n.checked=~e[22].post_types.indexOf(n.__value))},d(d){d&&R(t),e[14][0][e[24]].splice(e[14][0][e[24]].indexOf(n),1),_=!1,m()}}}function Ge(e){let t,n,l,c,o,u,_=e[25]+"",m,f,d,b,a,s;function r(){return e[16](e[22],e[27],e[23],e[24])}return{c(){t=p("div"),n=p("input"),c=E(),o=p("div"),u=p("span"),m=K(_),f=E(),d=p("span"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',b=E(),h(n,"type","hidden"),n.value=l=e[25],h(n,"name","permissions["+e[24]+"][capabilities][]"),h(d,"class","ml-2 font-bold"),h(o,"class","flex shadow items-center bg-cool-gray-100 rounded mr-1 px-1"),h(t,"class","w-auto")},m(v,w){U(v,t,w),i(t,n),i(t,c),i(t,o),i(o,u),i(u,m),i(o,f),i(o,d),i(t,b),a||(s=I(d,"click",r),a=!0)},p(v,w){e=v,w&1&&l!==(l=e[25])&&(n.value=l),w&1&&_!==(_=e[25]+"")&&ft(m,_)},d(v){v&&R(t),a=!1,s()}}}function yt(e){let t,n,l;function c(){return e[17](e[24])}return{c(){t=p("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="cursor-pointer" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 15l-6 -6l-6 6h12"></path></svg>',h(t,"title","Move up")},m(o,u){U(o,t,u),n||(l=I(t,"click",c),n=!0)},p(o,u){e=o},d(o){o&&R(t),n=!1,l()}}}function Ke(e){let t,n,l;function c(){return e[18](e[24])}return{c(){t=p("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="cursor-pointer" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 15l-6 -6l-6 6h12" transform="rotate(180 12 12)"></path></svg>',h(t,"title","Move down")},m(o,u){U(o,t,u),n||(l=I(t,"click",c),n=!0)},p(o,u){e=o},d(o){o&&R(t),n=!1,l()}}}function Ve(e){let t,n,l,c=e[5]("Name")+"",o,u,_,m,f,d,b,a,s,r,v=e[5]("Signed required")+"",w,y,k,T,C,q,P,j,g,M,F,N,O,V,A,z,X,et,tt,ke,nt,le,lt,we,it;function qt(){e[12].call(_,e[23],e[24])}let x=e[4],B=[];for(let S=0;S<x.length;S+=1)B[S]=We(Be(e,x,S));function Nt(...S){return e[15](e[24],...S)}let ee=e[22].capabilities,W=[];for(let S=0;S<ee.length;S+=1)W[S]=Ge(ze(e,ee,S));let Y=e[24]>0&&yt(e),G=e[24]<e[0].permissions.length-1&&Ke(e);function Dt(...S){return e[19](e[24],...S)}return{c(){t=p("div"),n=p("div"),l=p("label"),o=K(c),u=E(),_=p("input"),f=E(),d=p("label"),b=p("input"),r=E(),w=K(v),y=E(),k=p("div"),T=p("div"),C=p("span"),C.textContent=`${e[5]("Post type")}`,q=E(),P=p("div");for(let S=0;S<B.length;S+=1)B[S].c();j=E(),g=p("div"),M=p("span"),M.textContent=`${e[5]("Capabilities")}`,F=E(),N=p("input"),O=E(),V=p("div");for(let S=0;S<W.length;S+=1)W[S].c();A=E(),z=p("div"),X=p("div"),Y&&Y.c(),et=E(),G&&G.c(),tt=E(),ke=p("div"),nt=E(),le=p("div"),le.textContent=`${e[5]("Delete")}`,lt=E(),h(_,"type","text"),h(_,"name",m="permissions["+e[24]+"][name]"),h(_,"class","w-auto"),h(l,"class","flex flex-col"),h(b,"type","checkbox"),h(b,"name",a="permissions["+e[24]+"][logged_required]'"),b.checked=s=e[22].logged_required==="on",h(d,"class",""),h(T,"class","flex flex-col flex-1 space-y-1"),h(N,"type","text"),h(V,"class","flex flex-wrap space-x-1"),h(g,"class","flex flex-col space-y-1 flex-1"),h(k,"class","flex space-x-2"),h(n,"class","flex flex-col space-y-3"),h(X,"class","flex flex-col "),h(ke,"class","flex-1"),h(le,"class","p-2 bg-red-500 rounded text-white "),h(z,"class","flex items-center "),h(t,"class","border-1 border-gray-300 p-2 rounded bg-white")},m(S,J){U(S,t,J),i(t,n),i(n,l),i(l,o),i(l,u),i(l,_),Ee(_,e[22].name),i(n,f),i(n,d),i(d,b),i(d,r),i(d,w),i(n,y),i(n,k),i(k,T),i(T,C),i(T,q),i(T,P);for(let $=0;$<B.length;$+=1)B[$].m(P,null);i(k,j),i(k,g),i(g,M),i(g,F),i(g,N),i(g,O),i(g,V);for(let $=0;$<W.length;$+=1)W[$].m(V,null);i(t,A),i(t,z),i(z,X),Y&&Y.m(X,null),i(X,et),G&&G.m(X,null),i(z,tt),i(z,ke),i(z,nt),i(z,le),i(t,lt),we||(it=[I(_,"input",qt),I(N,"keypress",Nt),I(le,"click",Dt)],we=!0)},p(S,J){if(e=S,J&1&&_.value!==e[22].name&&Ee(_,e[22].name),J&1&&s!==(s=e[22].logged_required==="on")&&(b.checked=s),J&17){x=e[4];let $;for($=0;$<x.length;$+=1){const ie=Be(e,x,$);B[$]?B[$].p(ie,J):(B[$]=We(ie),B[$].c(),B[$].m(P,null))}for(;$<B.length;$+=1)B[$].d(1);B.length=x.length}if(J&1){ee=e[22].capabilities;let $;for($=0;$<ee.length;$+=1){const ie=ze(e,ee,$);W[$]?W[$].p(ie,J):(W[$]=Ge(ie),W[$].c(),W[$].m(V,null))}for(;$<W.length;$+=1)W[$].d(1);W.length=ee.length}e[24]>0&&Y.p(e,J),e[24]<e[0].permissions.length-1?G?G.p(e,J):(G=Ke(e),G.c(),G.m(X,null)):G&&(G.d(1),G=null)},d(S){S&&R(t),Q(B,S),Q(W,S),Y&&Y.d(),G&&G.d(),we=!1,Z(it)}}}function Ct(e){let t,n,l,c,o,u,_,m,f,d,b,a=e[0].permissions,s=[];for(let r=0;r<a.length;r+=1)s[r]=Ve(Ie(e,a,r));return{c(){t=p("div"),n=p("p"),n.textContent=`${e[5]("Permissions")}`,l=E(),c=p("div"),o=p("button"),o.textContent=`${e[5]("Save settings")}`,u=E(),_=p("button"),_.textContent=`${e[5]("Add new")}`,m=E(),f=p("form");for(let r=0;r<s.length;r+=1)s[r].c();h(n,"class","font-bold mb-2"),h(o,"class","bg-blue-500 text-white rounded p-1"),h(_,"class","border-1 border-blue-500 rounded p-1 bg-white"),h(c,"class","flex flex-row space-x-2 mt-2"),h(f,"action",e[2]),h(f,"method","post"),h(f,"class","space-y-2"),h(t,"class","space-y-2")},m(r,v){U(r,t,v),i(t,n),i(t,l),i(t,c),i(c,o),i(c,u),i(c,_),i(t,m),i(t,f);for(let w=0;w<s.length;w+=1)s[w].m(f,null);e[20](f),d||(b=[I(o,"click",e[10]),I(_,"click",e[11])],d=!0)},p(r,[v]){if(v&1009){a=r[0].permissions;let w;for(w=0;w<a.length;w+=1){const y=Ie(r,a,w);s[w]?s[w].p(y,v):(s[w]=Ve(y),s[w].c(),s[w].m(f,null))}for(;w<s.length;w+=1)s[w].d(1);s.length=a.length}},i:D,o:D,d(r){r&&R(t),Q(s,r),e[20](null),d=!1,Z(b)}}}function Et(e,t,n){let{config:l={postUrl:"",defaultPermission:{name:"New permission",logged_required:!0,post_types:[],capabilities:[]},post_types:["post","page","attachment"],permissions:[{name:"ShowProDir",logged_required:!1,post_types:["attachment"],capabilities:["CAN_READ","CAN_WRITE"]}],i18n:{}}}=t;const c=l.postUrl,o=l.defaultPermission,u=l.post_types;l.permissions;const _=ve(l.i18n);let m;function f(g,M){if(g.key==="Enter"){if(g.preventDefault(),g.target.value==="")return;n(0,l.permissions[M].capabilities=[...l.permissions[M].capabilities,g.target.value],l),g.target.value=""}}function d(g,M){M.preventDefault(),l.permissions.splice(g,1),n(0,l)}function b(g){const M=l.permissions[g-1];n(0,l.permissions[g-1]=l.permissions[g],l),n(0,l.permissions[g]=M,l)}function a(g){const M=l.permissions[g+1];n(0,l.permissions[g+1]=l.permissions[g],l),n(0,l.permissions[g]=M,l)}const s=[[]],r=()=>m.submit(),v=()=>n(0,l.permissions=[o,...l.permissions],l);function w(g,M){g[M].name=this.value,n(0,l)}function y(g,M){g[M].post_types=oe(s[0][M],this.__value,this.checked),n(0,l)}const k=(g,M)=>f(M,g),T=(g,M,F,N)=>{g.capabilities.splice(M,1),n(0,F[N].capabilities=g.capabilities,l)},C=g=>b(g),q=g=>a(g),P=(g,M)=>d(g,M);function j(g){_e[g?"unshift":"push"](()=>{m=g,n(1,m)})}return e.$$set=g=>{"config"in g&&n(0,l=g.config)},[l,m,c,o,u,_,f,d,b,a,r,v,w,y,s,k,T,C,q,P,j]}class Mt extends ge{constructor(t){super();me(this,t,Et,Ct,ue,{config:0})}}function Fe(e,t,n){const l=e.slice();return l[10]=t[n],l[11]=t,l[12]=n,l}function Je(e,t,n){const l=e.slice();return l[13]=t[n],l}function Qe(e,t,n){const l=e.slice();return l[10]=t[n],l[12]=n,l}function Xe(e){let t,n,l,c,o,u,_,m,f,d,b,a,s,r,v,w,y,k,T,C,q,P,j,g=e[2].permissions,M=[];for(let O=0;O<g.length;O+=1)M[O]=Ye(Qe(e,g,O));let F=e[2].permissions,N=[];for(let O=0;O<F.length;O+=1)N[O]=xe(Fe(e,F,O));return{c(){t=p("div"),n=p("div"),l=p("div"),c=p("label"),o=p("div"),o.textContent=`${e[3]("Abstract")}`,u=E(),_=p("textarea"),d=E(),b=p("div"),a=p("label"),s=p("div"),s.textContent=`${e[3]("Decorative image")}`,r=E(),v=p("input"),y=E(),k=p("div"),T=p("p"),T.textContent=`${e[3]("Permissions")}`,C=E(),q=p("div"),P=p("div");for(let O=0;O<M.length;O+=1)M[O].c();j=E();for(let O=0;O<N.length;O+=1)N[O].c();h(_,"name",m=e[2].names.abstract),h(_,"class","w-full"),_.value=f=e[2].abstract,h(l,"class","flex flex-col"),h(v,"type","file"),h(v,"accept","image/png, image/jpeg"),h(v,"name",w=e[2].names.image),h(b,"class","flex flex-col"),h(n,"class","space-y-3 flex-1"),h(P,"class","flex flex-row space-x-2"),h(q,"class","p-2 bg-white space-y-2"),h(k,"class","flex-1"),h(t,"class","flex flex-row space-x-2")},m(O,V){U(O,t,V),i(t,n),i(n,l),i(l,c),i(c,o),i(c,u),i(c,_),i(n,d),i(n,b),i(b,a),i(a,s),i(a,r),i(a,v),i(t,y),i(t,k),i(k,T),i(k,C),i(k,q),i(q,P);for(let A=0;A<M.length;A+=1)M[A].m(P,null);i(q,j);for(let A=0;A<N.length;A+=1)N[A].m(q,null)},p(O,V){if(V&6){g=O[2].permissions;let A;for(A=0;A<g.length;A+=1){const z=Qe(O,g,A);M[A]?M[A].p(z,V):(M[A]=Ye(z),M[A].c(),M[A].m(P,null))}for(;A<M.length;A+=1)M[A].d(1);M.length=g.length}if(V&15){F=O[2].permissions;let A;for(A=0;A<F.length;A+=1){const z=Fe(O,F,A);N[A]?N[A].p(z,V):(N[A]=xe(z),N[A].c(),N[A].m(q,null))}for(;A<N.length;A+=1)N[A].d(1);N.length=F.length}},d(O){O&&R(t),Q(M,O),Q(N,O)}}}function Ye(e){let t,n=e[10].name+"",l,c,o,u,_;function m(){return e[5](e[12])}return{c(){t=p("div"),l=K(n),c=E(),h(t,"class",o="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(e[1].name===e[10].name&&"bg-blue-500 text-white"))},m(f,d){U(f,t,d),i(t,l),i(t,c),u||(_=I(t,"click",m),u=!0)},p(f,d){e=f,d&2&&o!==(o="shadow font-bold hover:bg-blue-500 hover:text-white cursor-pointer rounded flex-1 p-2 "+(e[1].name===e[10].name&&"bg-blue-500 text-white"))&&h(t,"class",o)},d(f){f&&R(t),u=!1,_()}}}function Ze(e){let t,n,l,c,o=e[13]+"",u,_,m,f;e[8][0][e[12]]=[];function d(){e[7].call(n,e[10],e[12])}return{c(){t=p("label"),n=p("input"),l=E(),c=p("span"),u=K(o),_=E(),h(n,"type","checkbox"),n.__value=e[13],n.value=n.__value,h(n,"name",""+(e[2].names.permission+"["+e[10].name+"][capabilities][]")),e[8][0][e[12]].push(n)},m(b,a){U(b,t,a),i(t,n),n.checked=~e[0][e[10].name].capabilities.indexOf(n.__value),i(t,l),i(t,c),i(c,u),i(t,_),m||(f=I(n,"change",d),m=!0)},p(b,a){e=b,a&5&&(n.checked=~e[0][e[10].name].capabilities.indexOf(n.__value))},d(b){b&&R(t),e[8][0][e[12]].splice(e[8][0][e[12]].indexOf(n),1),m=!1,f()}}}function xe(e){let t,n,l,c,o=e[3]("Signed required")+"",u,_,m,f,d,b;function a(){e[6].call(l,e[10])}let s=e[10].capabilities,r=[];for(let v=0;v<s.length;v+=1)r[v]=Ze(Je(e,s,v));return{c(){t=p("div"),n=p("label"),l=p("input"),c=E(),u=K(o),_=E(),m=p("div");for(let v=0;v<r.length;v+=1)r[v].c();f=E(),h(l,"type","checkbox"),h(l,"name",""+(e[2].names.permission+"["+e[10].name+"][logged_required]")),h(t,"class","p-2"),ae(t,"hidden",e[10].name!==e[1].name)},m(v,w){U(v,t,w),i(t,n),i(n,l),l.checked=e[0][e[10].name].logged_required,i(n,c),i(n,u),i(t,_),i(t,m);for(let y=0;y<r.length;y+=1)r[y].m(m,null);i(t,f),d||(b=I(l,"change",a),d=!0)},p(v,w){if(e=v,w&5&&(l.checked=e[0][e[10].name].logged_required),w&5){s=e[10].capabilities;let y;for(y=0;y<s.length;y+=1){const k=Je(e,s,y);r[y]?r[y].p(k,w):(r[y]=Ze(k),r[y].c(),r[y].m(m,null))}for(;y<r.length;y+=1)r[y].d(1);r.length=s.length}w&6&&ae(t,"hidden",e[10].name!==e[1].name)},d(v){v&&R(t),Q(r,v),d=!1,b()}}}function At(e){let t,n=e[1]&&Xe(e);return{c(){n&&n.c(),t=ct()},m(l,c){n&&n.m(l,c),U(l,t,c)},p(l,[c]){l[1]?n?n.p(l,c):(n=Xe(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(l){n&&n.d(l),l&&R(t)}}}function $t(e,t,n){const l={names:{abstract:"mc_metabox_abstract",image:"mc_metabox_image",permission:"mc_metabox_permission"},abstract:"",permissions:[{name:"ShowProDir",logged_required:!1,post_types:["attachment"],capabilities:["CAN_READ","CAN_WRITE"]},{name:"ShowProDir2",logged_required:!1,post_types:["attachment"],capabilities:["CAN_READ_1","CAN_WRITE_1"]}],selections:{},i18n:{}};let{config:c={}}=t;const o=se(se({},l),c||{});console.log(o),Te(o.permissions,o.selections||[],s=>s.name,s=>({name:s.name,post_types:[],capabilities:[]}));const u=Se(o.selections,s=>s.name),_=ve(o.i18n);let m=o.permissions[0];const f=[[]],d=s=>n(1,m=o.permissions[s]);function b(s){u[s.name].logged_required=this.checked,n(0,u)}function a(s,r){u[s.name].capabilities=oe(f[0][r],this.__value,this.checked),n(0,u)}return e.$$set=s=>{"config"in s&&n(4,c=s.config)},[u,m,o,_,c,d,b,a,f]}class Pt extends ge{constructor(t){super();me(this,t,$t,At,ue,{config:4})}}function be(e,t){Array.from(document.getElementsByClassName(e)).forEach(n=>t(n))}function Ot(e,t){be(e,n=>new wt({target:n,props:{config:t}}))}function St(e,t){be(e,n=>new Mt({target:n,props:{config:t}}))}function Tt(e,t){be(e,n=>new Pt({target:n,props:{config:t}}))}L.renderMetaPost=Tt,L.renderPermissionEditor=St,L.renderUserPermissions=Ot,Object.defineProperty(L,"__esModule",{value:!0}),L[Symbol.toStringTag]="Module"});
